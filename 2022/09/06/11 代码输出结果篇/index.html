<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="OnlyCat"><meta name="copyright" content="OnlyCat"><meta name="generator" content="Hexo 6.2.0"><meta name="theme" content="hexo-theme-yun"><title>ä»£ç è¾“å‡ºç»“æœ | ä¸€åªçŒ«çš„å°ç«™</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.3.3/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="mask-icon" href="/favicon.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"yuyang-hou.github.io","root":"/","title":"ä¸€åªçŒ«çš„å°ç«™","version":"1.10.4","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"vendors":{"darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="ä»£ç è¾“å‡ºç»“æœç¯‡å‰è¨€ï¼šä»£ç è¾“å‡ºç»“æœæ˜¯é¢è¯•ä¸­å¸¸è€ƒçš„é¢˜ç›®ï¼Œä¸€æ®µä»£ç ä¸­å¯èƒ½æ¶‰åŠåˆ°å¾ˆå¤šçš„çŸ¥è¯†ç‚¹ï¼Œè¿™å°±è€ƒå¯Ÿåˆ°äº†åº”è˜è€…çš„åŸºç¡€èƒ½åŠ›ã€‚åœ¨å‰ç«¯é¢è¯•ä¸­ï¼Œå¸¸è€ƒçš„ä»£ç è¾“å‡ºé—®é¢˜ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼šå¼‚æ­¥ç¼–ç¨‹ã€äº‹ä»¶å¾ªç¯ã€thisæŒ‡å‘ã€ä½œç”¨åŸŸã€å˜é‡æå‡ã€é—­åŒ…ã€åŸå‹ã€ç»§æ‰¿ç­‰ï¼Œè¿™äº›çŸ¥è¯†ç‚¹å¾€å¾€ä¸æ˜¯å•ç‹¬å‡ºç°çš„ï¼Œè€Œæ˜¯åœ¨åŒä¸€æ®µä»£ç ä¸­åŒ…å«å¤šä¸ªçŸ¥è¯†ç‚¹ã€‚æ‰€ä»¥ï¼Œç¬”è€…å°†è¿™äº›é—®é¢˜å¤§è‡´åˆ†ä¸ºå››ç±»è¿›è¡Œè®¨è®ºã€‚è¿™é‡Œä¸ä¼šç³»ç»Ÿçš„é˜è¿°åŸºç¡€çŸ¥è¯†ï¼Œè€Œæ˜¯é€šè¿‡é¢è¯•ä¾‹é¢˜çš„å½¢å¼ï¼Œ">
<meta property="og:type" content="article">
<meta property="og:title" content="ä»£ç è¾“å‡ºç»“æœ">
<meta property="og:url" content="http://yuyang-hou.github.io/2022/09/06/11%20%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E7%AF%87/index.html">
<meta property="og:site_name" content="ä¸€åªçŒ«çš„å°ç«™">
<meta property="og:description" content="ä»£ç è¾“å‡ºç»“æœç¯‡å‰è¨€ï¼šä»£ç è¾“å‡ºç»“æœæ˜¯é¢è¯•ä¸­å¸¸è€ƒçš„é¢˜ç›®ï¼Œä¸€æ®µä»£ç ä¸­å¯èƒ½æ¶‰åŠåˆ°å¾ˆå¤šçš„çŸ¥è¯†ç‚¹ï¼Œè¿™å°±è€ƒå¯Ÿåˆ°äº†åº”è˜è€…çš„åŸºç¡€èƒ½åŠ›ã€‚åœ¨å‰ç«¯é¢è¯•ä¸­ï¼Œå¸¸è€ƒçš„ä»£ç è¾“å‡ºé—®é¢˜ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼šå¼‚æ­¥ç¼–ç¨‹ã€äº‹ä»¶å¾ªç¯ã€thisæŒ‡å‘ã€ä½œç”¨åŸŸã€å˜é‡æå‡ã€é—­åŒ…ã€åŸå‹ã€ç»§æ‰¿ç­‰ï¼Œè¿™äº›çŸ¥è¯†ç‚¹å¾€å¾€ä¸æ˜¯å•ç‹¬å‡ºç°çš„ï¼Œè€Œæ˜¯åœ¨åŒä¸€æ®µä»£ç ä¸­åŒ…å«å¤šä¸ªçŸ¥è¯†ç‚¹ã€‚æ‰€ä»¥ï¼Œç¬”è€…å°†è¿™äº›é—®é¢˜å¤§è‡´åˆ†ä¸ºå››ç±»è¿›è¡Œè®¨è®ºã€‚è¿™é‡Œä¸ä¼šç³»ç»Ÿçš„é˜è¿°åŸºç¡€çŸ¥è¯†ï¼Œè€Œæ˜¯é€šè¿‡é¢è¯•ä¾‹é¢˜çš„å½¢å¼ï¼Œ">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-watermark.image">
<meta property="article:published_time" content="2022-09-06T10:00:29.884Z">
<meta property="article:modified_time" content="2022-09-06T10:00:29.884Z">
<meta property="article:author" content="OnlyCat">
<meta property="article:tag" content="algorithm">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-watermark.image"><script>(function() {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="OnlyCat"><img width="96" loading="lazy" src="/images/avatar.jpg" alt="OnlyCat"><span class="site-author-status" title="ä¸æƒ³ä¸Šå­¦">ğŸ˜€</span></a><div class="site-author-name"><a href="/about/">OnlyCat</a></div><span class="site-name">ä¸€åªçŒ«çš„å°ç«™</span><sub class="site-subtitle"></sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">34</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">0</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">14</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://yun.yunyoujun.cn" title="æ–‡æ¡£"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:settings-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/Yuyang-Hou" title="GitHub" target="_blank" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="mailto:508701891@qq.com" title="E-Mail" target="_blank" style="color:#8E71C1"><span class="icon iconify" data-icon="ri:mail-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E7%AF%87"><span class="toc-number">1.</span> <span class="toc-text">ä»£ç è¾“å‡ºç»“æœç¯‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E8%A8%80%EF%BC%9A"><span class="toc-number">1.0.1.</span> <span class="toc-text">å‰è¨€ï¼š</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%BC%82%E6%AD%A5-amp-%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.1.</span> <span class="toc-text">ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.4.</span> <span class="toc-text">4. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.5.</span> <span class="toc-text">5. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.6.</span> <span class="toc-text">6. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.7.</span> <span class="toc-text">7. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.8.</span> <span class="toc-text">8. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.9.</span> <span class="toc-text">9. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.10.</span> <span class="toc-text">10. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.11.</span> <span class="toc-text">11. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.12.</span> <span class="toc-text">12. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.13.</span> <span class="toc-text">13. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.14.</span> <span class="toc-text">14. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.15.</span> <span class="toc-text">15. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.16.</span> <span class="toc-text">16. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.17.</span> <span class="toc-text">17. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.18.</span> <span class="toc-text">18. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.19.</span> <span class="toc-text">19. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.20.</span> <span class="toc-text">20. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.21.</span> <span class="toc-text">21. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.22.</span> <span class="toc-text">22. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.23.</span> <span class="toc-text">23. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.24.</span> <span class="toc-text">24. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.25.</span> <span class="toc-text">25. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.26.</span> <span class="toc-text">26. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.27.</span> <span class="toc-text">27. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.28.</span> <span class="toc-text">28. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.29.</span> <span class="toc-text">29. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.30.</span> <span class="toc-text">30. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C"><span class="toc-number">1.1.31.</span> <span class="toc-text">31. ä»£ç è¾“å‡ºç»“æœ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81this"><span class="toc-number">1.2.</span> <span class="toc-text">äºŒã€this (!)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-%EF%BC%88-%EF%BC%89"><span class="toc-number">1.2.4.</span> <span class="toc-text">4. ä»£ç è¾“å‡ºç»“æœ ï¼ˆ!ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">6. ä»£ç è¾“å‡ºç»“æœ  (!)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.6.</span> <span class="toc-text">7. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E9%97%AE%E9%A2%98%EF%BC%88%EF%BC%81%EF%BC%89"><span class="toc-number">1.2.7.</span> <span class="toc-text">8. ä»£ç è¾“å‡ºé—®é¢˜ï¼ˆï¼ï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.8.</span> <span class="toc-text">9. ä»£ç è¾“å‡ºç»“æœ (!)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.9.</span> <span class="toc-text">10. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.10.</span> <span class="toc-text">11. ä»£ç è¾“å‡ºç»“æœ (!?)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.11.</span> <span class="toc-text">12. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.12.</span> <span class="toc-text">13. ä»£ç è¾“å‡ºç»“æœ (!?)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.13.</span> <span class="toc-text">14. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.2.14.</span> <span class="toc-text">15. ä»£ç è¾“å‡ºç»“æœ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E4%BD%9C%E7%94%A8%E5%9F%9F-amp-%E5%8F%98%E9%87%8F%E6%8F%90%E5%8D%87-amp-%E9%97%AD%E5%8C%85"><span class="toc-number">1.3.</span> <span class="toc-text">ä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.3.2.</span> <span class="toc-text">2. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.3.3.</span> <span class="toc-text">3. ä»£ç è¾“å‡ºç»“æœ (!)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.3.4.</span> <span class="toc-text">4. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.3.5.</span> <span class="toc-text">5. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.3.6.</span> <span class="toc-text">6. ä»£ç è¾“å‡ºç»“æœ (!)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E9%97%AE%E9%A2%98"><span class="toc-number">1.3.7.</span> <span class="toc-text">7. ä»£ç è¾“å‡ºé—®é¢˜ (!)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-1"><span class="toc-number">1.3.8.</span> <span class="toc-text">8. ä»£ç è¾“å‡ºç»“æœ (!)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%8E%9F%E5%9E%8B-amp-%E7%BB%A7%E6%89%BF"><span class="toc-number">1.4.</span> <span class="toc-text">å››ã€åŸå‹&amp;ç»§æ‰¿</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-3"><span class="toc-number">1.4.1.</span> <span class="toc-text">1. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-3"><span class="toc-number">1.4.2.</span> <span class="toc-text">2. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-3"><span class="toc-number">1.4.3.</span> <span class="toc-text">3. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.4.4.</span> <span class="toc-text">4. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.4.5.</span> <span class="toc-text">5. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-3"><span class="toc-number">1.4.6.</span> <span class="toc-text">6. ä»£ç è¾“å‡ºç»“æœ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E9%97%AE%E9%A2%98-1"><span class="toc-number">1.4.7.</span> <span class="toc-text">7. ä»£ç è¾“å‡ºé—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.8.</span> <span class="toc-text">8 ä»£ç è¾“å‡ºé—®é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C-2"><span class="toc-number">1.4.9.</span> <span class="toc-text">9. ä»£ç è¾“å‡ºç»“æœ</span></a></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://yuyang-hou.github.io/2022/09/06/11%20%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E7%AF%87/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="OnlyCat"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="ä¸€åªçŒ«çš„å°ç«™"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ä»£ç è¾“å‡ºç»“æœ</h1><div class="post-meta"><div class="post-time"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="Created: 2022-09-06 10:00:29" itemprop="dateCreated datePublished" datetime="2022-09-06T10:00:29+00:00">2022-09-06</time></div><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/algorithm/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">algorithm</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="ä»£ç è¾“å‡ºç»“æœç¯‡"><a href="#ä»£ç è¾“å‡ºç»“æœç¯‡" class="headerlink" title="ä»£ç è¾“å‡ºç»“æœç¯‡"></a>ä»£ç è¾“å‡ºç»“æœç¯‡</h1><h3 id="å‰è¨€ï¼š"><a href="#å‰è¨€ï¼š" class="headerlink" title="å‰è¨€ï¼š"></a>å‰è¨€ï¼š</h3><p><strong>ä»£ç è¾“å‡ºç»“æœ</strong>æ˜¯é¢è¯•ä¸­å¸¸è€ƒçš„é¢˜ç›®ï¼Œä¸€æ®µä»£ç ä¸­å¯èƒ½æ¶‰åŠåˆ°å¾ˆå¤šçš„çŸ¥è¯†ç‚¹ï¼Œè¿™å°±è€ƒå¯Ÿåˆ°äº†åº”è˜è€…çš„åŸºç¡€èƒ½åŠ›ã€‚åœ¨å‰ç«¯é¢è¯•ä¸­ï¼Œå¸¸è€ƒçš„ä»£ç è¾“å‡ºé—®é¢˜ä¸»è¦æ¶‰åŠåˆ°ä»¥ä¸‹çŸ¥è¯†ç‚¹ï¼š<strong>å¼‚æ­¥ç¼–ç¨‹ã€äº‹ä»¶å¾ªç¯ã€thisæŒ‡å‘ã€ä½œç”¨åŸŸã€å˜é‡æå‡ã€é—­åŒ…ã€åŸå‹ã€ç»§æ‰¿</strong>ç­‰ï¼Œè¿™äº›çŸ¥è¯†ç‚¹å¾€å¾€ä¸æ˜¯å•ç‹¬å‡ºç°çš„ï¼Œè€Œæ˜¯åœ¨åŒä¸€æ®µä»£ç ä¸­åŒ…å«å¤šä¸ªçŸ¥è¯†ç‚¹ã€‚æ‰€ä»¥ï¼Œç¬”è€…å°†è¿™äº›é—®é¢˜å¤§è‡´åˆ†ä¸ºå››ç±»è¿›è¡Œè®¨è®ºã€‚è¿™é‡Œä¸ä¼šç³»ç»Ÿçš„é˜è¿°åŸºç¡€çŸ¥è¯†ï¼Œè€Œæ˜¯é€šè¿‡é¢è¯•ä¾‹é¢˜çš„å½¢å¼ï¼Œæ¥è®²è¿°æ¯ä¸ªé¢˜ç›®çš„çŸ¥è¯†ç‚¹ä»¥åŠä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ã€‚å¦‚æœä¼šäº†è¿™äº›ä¾‹é¢˜ï¼Œåœ¨å‰ç«¯é¢è¯•ä¸­å¤šæ•°ä»£ç è¾“å‡ºé—®é¢˜å°±å¯ä»¥è½»è€Œæ˜“ä¸¾çš„è§£å†³äº†ã€‚</p>
<h2 id="ä¸€ã€å¼‚æ­¥-amp-äº‹ä»¶å¾ªç¯"><a href="#ä¸€ã€å¼‚æ­¥-amp-äº‹ä»¶å¾ªç¯" class="headerlink" title="ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯"></a>ä¸€ã€å¼‚æ­¥&amp;äº‹ä»¶å¾ªç¯</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ"><a href="#1-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 </span><br><span class="line">2 </span><br><span class="line">4</span><br></pre></td></tr></table></figure>

<p>promise.then æ˜¯å¾®ä»»åŠ¡ï¼Œå®ƒä¼šåœ¨æ‰€æœ‰çš„å®ä»»åŠ¡æ‰§è¡Œå®Œä¹‹åæ‰ä¼šæ‰§è¡Œï¼ŒåŒæ—¶éœ€è¦promiseå†…éƒ¨çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå› ä¸ºè¿™é‡Œå†…éƒ¨æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä¸€ç›´å¤„äºpendingçŠ¶æ€ï¼Œæ‰€ä»¥ä¸è¾“å‡º3ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ"><a href="#2-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">const promise1 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;promise1&#x27;)</span><br><span class="line">  resolve(&#x27;resolve1&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">const promise2 = promise1.then(res =&gt; &#123;</span><br><span class="line">  console.log(res)</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&#x27;1&#x27;, promise1);</span><br><span class="line">console.log(&#x27;2&#x27;, promise2);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">promise1</span><br><span class="line">1 Promise&#123;&lt;resolved&gt;: resolve1&#125;</span><br><span class="line">2 Promise&#123;&lt;pending&gt;&#125;</span><br><span class="line">resolve1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç›´æ¥æ‰“å°promise1ï¼Œä¼šæ‰“å°å‡ºå®ƒçš„çŠ¶æ€å€¼å’Œå‚æ•°ã€‚</p>
<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>scriptæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒæŒ‰ç…§é¡ºåºæ‰§è¡Œè¿™äº›ä»£ç ï¼›</li>
<li>é¦–å…ˆè¿›å…¥Promiseï¼Œæ‰§è¡Œè¯¥æ„é€ å‡½æ•°ä¸­çš„ä»£ç ï¼Œæ‰“å°<code>promise1</code>ï¼›</li>
<li>ç¢°åˆ°<code>resolve</code>å‡½æ•°, å°†<code>promise1</code>çš„çŠ¶æ€æ”¹å˜ä¸º<code>resolved</code>, å¹¶å°†ç»“æœä¿å­˜ä¸‹æ¥ï¼›</li>
<li>ç¢°åˆ°<code>promise1.then</code>è¿™ä¸ªå¾®ä»»åŠ¡ï¼Œå°†å®ƒæ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li><code>promise2</code>æ˜¯ä¸€ä¸ªæ–°çš„çŠ¶æ€ä¸º<code>pending</code>çš„<code>Promise</code>ï¼›</li>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç 1ï¼Œ åŒæ—¶æ‰“å°å‡º<code>promise1</code>çš„çŠ¶æ€æ˜¯<code>resolved</code>ï¼›</li>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç 2ï¼ŒåŒæ—¶æ‰“å°å‡º<code>promise2</code>çš„çŠ¶æ€æ˜¯<code>pending</code>ï¼›</li>
<li>å®ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼ŒæŸ¥æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå‘ç°<code>promise1.then</code>è¿™ä¸ªå¾®ä»»åŠ¡ä¸”çŠ¶æ€ä¸º<code>resolved</code>ï¼Œæ‰§è¡Œå®ƒã€‚</li>
</ol>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ"><a href="#3-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const promise = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&quot;timerStart&quot;);</span><br><span class="line">    resolve(&quot;success&quot;);</span><br><span class="line">    console.log(&quot;timerEnd&quot;);</span><br><span class="line">  &#125;, 0);</span><br><span class="line">  console.log(2);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then((res) =&gt; &#123;</span><br><span class="line">  console.log(res);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(4);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">timerStart</span><br><span class="line">timerEnd</span><br><span class="line">success</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>é¦–å…ˆé‡åˆ°Promiseæ„é€ å‡½æ•°ï¼Œä¼šå…ˆæ‰§è¡Œé‡Œé¢çš„å†…å®¹ï¼Œæ‰“å°<code>1</code>ï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨<code>steTimeout</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç»§ç»­å‘ä¸‹æ‰§è¡Œï¼Œæ‰“å°å‡º2ï¼›</li>
<li>ç”±äº<code>Promise</code>çš„çŠ¶æ€æ­¤æ—¶è¿˜æ˜¯<code>pending</code>ï¼Œæ‰€ä»¥<code>promise.then</code>å…ˆä¸æ‰§è¡Œï¼›</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»»åŠ¡ï¼Œæ‰“å°å‡º4ï¼›</li>
<li>æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—æ²¡æœ‰ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œæ‰§è¡Œ<code>steTimeout</code>ï¼›</li>
<li>é¦–å…ˆæ‰§è¡Œ<code>timerStart</code>ï¼Œç„¶åé‡åˆ°äº†<code>resolve</code>ï¼Œå°†<code>promise</code>çš„çŠ¶æ€æ”¹ä¸º<code>resolved</code>ä¸”ä¿å­˜ç»“æœå¹¶å°†ä¹‹å‰çš„<code>promise.then</code>æ¨å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œ<code>timerEnd</code>ï¼›</li>
<li>æ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å»æ‰§è¡Œå¾®ä»»åŠ¡<code>promise.then</code>ï¼Œæ‰“å°å‡º<code>resolve</code>çš„ç»“æœã€‚</li>
</ul>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ"><a href="#4-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;promise1&#x27;);</span><br><span class="line">  const timer2 = setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;timer2&#x27;)</span><br><span class="line">  &#125;, 0)</span><br><span class="line">&#125;);</span><br><span class="line">const timer1 = setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;timer1&#x27;)</span><br><span class="line">  Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;promise2&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;, 0)</span><br><span class="line">console.log(&#x27;start&#x27;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">start</span><br><span class="line">promise1</span><br><span class="line">timer1</span><br><span class="line">promise2</span><br><span class="line">timer2</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆï¼Œ<code>Promise.resolve().then</code>æ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>æ‰§è¡Œtimer1ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º<code>start</code></li>
<li>è¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡<code>Promise.resolve().then</code>ï¼Œæ‰“å°å‡º<code>promise1</code></li>
<li>é‡åˆ°<code>timer2</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸¤ä¸ªä»»åŠ¡ï¼Œåˆ†åˆ«æ˜¯<code>timer1</code>ã€<code>timer2</code>ï¼›</li>
<li>è¿™æ ·ç¬¬ä¸€è½®å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œç¬¬äºŒè½®å®ä»»åŠ¡ï¼Œé¦–å…ˆæ‰§è¡Œå®šæ—¶å™¨<code>timer1</code>ï¼Œæ‰“å°<code>timer1</code>ï¼›</li>
<li>é‡åˆ°<code>Promise.resolve().then</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾®ä»»åŠ¡ï¼ŒåŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œæ‰“å°<code>promise2</code>ï¼›</li>
<li>æœ€åæ‰§è¡Œå®ä»»åŠ¡<code>timer2</code>å®šæ—¶å™¨ï¼Œæ‰“å°å‡º<code>timer2</code>ï¼›</li>
</ol>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ"><a href="#5-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const promise = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    resolve(&#x27;success1&#x27;);</span><br><span class="line">    reject(&#x27;error&#x27;);</span><br><span class="line">    resolve(&#x27;success2&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">promise.then((res) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;then:&#x27;, res);</span><br><span class="line">&#125;).catch((err) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;catch:&#x27;, err);</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">thenï¼šsuccess1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé¢˜ç›®è€ƒå¯Ÿçš„å°±æ˜¯<strong>Promiseçš„çŠ¶æ€åœ¨å‘ç”Ÿå˜åŒ–ä¹‹åï¼Œå°±ä¸ä¼šå†å‘ç”Ÿå˜åŒ–</strong>ã€‚å¼€å§‹çŠ¶æ€ç”±<code>pending</code>å˜ä¸º<code>resolve</code>ï¼Œè¯´æ˜å·²ç»å˜ä¸ºå·²å®ŒæˆçŠ¶æ€ï¼Œä¸‹é¢çš„ä¸¤ä¸ªçŠ¶æ€çš„å°±ä¸ä¼šå†æ‰§è¡Œï¼ŒåŒæ—¶ä¸‹é¢çš„catchä¹Ÿä¸ä¼šæ•è·åˆ°é”™è¯¯ã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ"><a href="#6-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(1)</span><br><span class="line">  .then(2)</span><br><span class="line">  .then(Promise.resolve(3))</span><br><span class="line">  .then(console.log)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">Promise &#123;&lt;fulfilled&gt;: undefined&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>Promise.resolveæ–¹æ³•çš„å‚æ•°å¦‚æœæ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolveæ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseå¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºresolvedï¼ŒPromise.resolveæ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚</p>
<p>thenæ–¹æ³•æ¥å—çš„å‚æ•°æ˜¯å‡½æ•°ï¼Œè€Œå¦‚æœä¼ é€’çš„å¹¶éæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå®é™…ä¸Šä¼šå°†å…¶è§£é‡Šä¸ºthen(null)ï¼Œè¿™å°±ä¼šå¯¼è‡´å‰ä¸€ä¸ªPromiseçš„ç»“æœä¼šä¼ é€’ä¸‹é¢ã€‚</p>
<h3 id="7-ä»£ç è¾“å‡ºç»“æœ"><a href="#7-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="7. ä»£ç è¾“å‡ºç»“æœ"></a>7. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">const promise1 = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    resolve(&#x27;success&#x27;)</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;)</span><br><span class="line">const promise2 = promise1.then(() =&gt; &#123;</span><br><span class="line">  throw new Error(&#x27;error!!!&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line">console.log(&#x27;promise1&#x27;, promise1)</span><br><span class="line">console.log(&#x27;promise2&#x27;, promise2)</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;promise1&#x27;, promise1)</span><br><span class="line">  console.log(&#x27;promise2&#x27;, promise2)</span><br><span class="line">&#125;, 2000)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">promise1 Promise &#123;&lt;pending&gt;&#125;</span><br><span class="line">promise2 Promise &#123;&lt;pending&gt;&#125;</span><br><span class="line"></span><br><span class="line">Uncaught (in promise) Error: error!!!</span><br><span class="line">promise1 Promise &#123;&lt;fulfilled&gt;: &quot;success&quot;&#125;</span><br><span class="line">promise2 Promise &#123;&lt;rejected&gt;: Error: error!!&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="8-ä»£ç è¾“å‡ºç»“æœ"><a href="#8-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="8. ä»£ç è¾“å‡ºç»“æœ"></a>8. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(1)</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">    return 2;</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(err =&gt; &#123;</span><br><span class="line">    return 3;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(res);</span><br><span class="line">  &#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1   </span><br><span class="line">2</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>Promiseæ˜¯å¯ä»¥é“¾å¼è°ƒç”¨çš„ï¼Œç”±äºæ¯æ¬¡è°ƒç”¨ <code>.then</code> æˆ–è€… <code>.catch</code> éƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œä»è€Œå®ç°äº†é“¾å¼è°ƒç”¨, å®ƒå¹¶ä¸åƒä¸€èˆ¬ä»»åŠ¡çš„é“¾å¼è°ƒç”¨ä¸€æ ·return thisã€‚</p>
<p>ä¸Šé¢çš„è¾“å‡ºç»“æœä¹‹æ‰€ä»¥ä¾æ¬¡æ‰“å°å‡º1å’Œ2ï¼Œæ˜¯å› ä¸º<code>resolve(1)</code>ä¹‹åèµ°çš„æ˜¯ç¬¬ä¸€ä¸ªthenæ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è¿›catché‡Œï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªthenä¸­çš„reså¾—åˆ°çš„å®é™…ä¸Šæ˜¯ç¬¬ä¸€ä¸ªthençš„è¿”å›å€¼ã€‚å¹¶ä¸”return 2ä¼šè¢«åŒ…è£…æˆ<code>resolve(2)</code>ï¼Œè¢«æœ€åçš„thenæ‰“å°è¾“å‡º2ã€‚</p>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ"><a href="#9-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ"></a>9. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">  return new Error(&#x27;error!!!&#x27;)</span><br><span class="line">&#125;).then(res =&gt; &#123;</span><br><span class="line">  console.log(&quot;then: &quot;, res)</span><br><span class="line">&#125;).catch(err =&gt; &#123;</span><br><span class="line">  console.log(&quot;catch: &quot;, err)</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;then: &quot; &quot;Error: error!!!&quot;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿”å›ä»»æ„ä¸€ä¸ªé promise çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆ promise å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œçš„<code>return new Error(&#39;error!!!&#39;)</code>ä¹Ÿè¢«åŒ…è£¹æˆäº†<code>return Promise.resolve(new Error(&#39;error!!!&#39;))</code>ï¼Œå› æ­¤å®ƒä¼šè¢«thenæ•è·è€Œä¸æ˜¯catchã€‚</p>
<h3 id="10-ä»£ç è¾“å‡ºç»“æœ"><a href="#10-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="10. ä»£ç è¾“å‡ºç»“æœ"></a>10. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const promise = Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">  return promise;</span><br><span class="line">&#125;)</span><br><span class="line">promise.catch(console.err)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Uncaught (in promise) TypeError: Chaining cycle detected for promise #&lt;Promise&gt;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªå‘ï¼Œ<code>.then</code> æˆ– <code>.catch</code> è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚</p>
<h3 id="11-ä»£ç è¾“å‡ºç»“æœ"><a href="#11-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="11. ä»£ç è¾“å‡ºç»“æœ"></a>11. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(1)</span><br><span class="line">  .then(2)</span><br><span class="line">  .then(Promise.resolve(3))</span><br><span class="line">  .then(console.log)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°è¿™ä¸ªé¢˜ç›®ï¼Œå¥½å¤šçš„thenï¼Œå®é™…ä¸Šåªéœ€è¦è®°ä½ä¸€ä¸ªåŸåˆ™ï¼š<code>.then</code> æˆ–<code>.catch</code> çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿ<strong>å€¼é€ä¼ </strong>ã€‚</p>
<p>ç¬¬ä¸€ä¸ªthenå’Œç¬¬äºŒä¸ªthenä¸­ä¼ å…¥çš„éƒ½ä¸æ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯æ•°å­—ï¼Œä¸€ä¸ªæ˜¯å¯¹è±¡ï¼Œå› æ­¤å‘ç”Ÿäº†é€ä¼ ï¼Œå°†<code>resolve(1)</code> çš„å€¼ç›´æ¥ä¼ åˆ°æœ€åä¸€ä¸ªthené‡Œï¼Œç›´æ¥æ‰“å°å‡º1ã€‚</p>
<h3 id="12-ä»£ç è¾“å‡ºç»“æœ"><a href="#12-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="12. ä»£ç è¾“å‡ºç»“æœ"></a>12. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.reject(&#x27;err!!!&#x27;)</span><br><span class="line">  .then((res) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;success&#x27;, res)</span><br><span class="line">  &#125;, (err) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;error&#x27;, err)</span><br><span class="line">  &#125;).catch(err =&gt; &#123;</span><br><span class="line">    console.log(&#x27;catch&#x27;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">error err!!!</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œ<code>.then</code>å‡½æ•°ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç”¨æ¥å¤„ç†PromiseæˆåŠŸçš„å‡½æ•°</li>
<li>ç¬¬äºŒä¸ªåˆ™æ˜¯å¤„ç†å¤±è´¥çš„å‡½æ•°</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´<code>Promise.resolve(&#39;1&#39;)</code>çš„å€¼ä¼šè¿›å…¥æˆåŠŸçš„å‡½æ•°ï¼Œ<code>Promise.reject(&#39;2&#39;)</code>çš„å€¼ä¼šè¿›å…¥å¤±è´¥çš„å‡½æ•°ã€‚</p>
<p>åœ¨è¿™é“é¢˜ä¸­ï¼Œé”™è¯¯ç›´æ¥è¢«<code>then</code>çš„ç¬¬äºŒä¸ªå‚æ•°æ•è·äº†ï¼Œæ‰€ä»¥å°±ä¸ä¼šè¢«<code>catch</code>æ•è·äº†ï¼Œè¾“å‡ºç»“æœä¸ºï¼š<code>error err!!!&#39;</code></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯åƒä¸‹é¢è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve()</span><br><span class="line">  .then(function success (res) &#123;</span><br><span class="line">    throw new Error(&#x27;error!!!&#x27;)</span><br><span class="line">  &#125;, function fail1 (err) &#123;</span><br><span class="line">    console.log(&#x27;fail1&#x27;, err)</span><br><span class="line">  &#125;).catch(function fail2 (err) &#123;</span><br><span class="line">    console.log(&#x27;fail2&#x27;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åœ¨<code>then</code>çš„ç¬¬ä¸€å‚æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œé‚£ä¹ˆä»–å°±ä¸ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°ä¸æ´»äº†ï¼Œè€Œæ˜¯è¢«åé¢çš„<code>catch</code>æ•è·åˆ°ã€‚</p>
<h3 id="13-ä»£ç è¾“å‡ºç»“æœ"><a href="#13-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="13. ä»£ç è¾“å‡ºç»“æœ"></a>13. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(&#x27;1&#x27;)</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .finally(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;finally&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">Promise.resolve(&#x27;2&#x27;)</span><br><span class="line">  .finally(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;finally2&#x27;)</span><br><span class="line">  	return &#x27;æˆ‘æ˜¯finally2è¿”å›çš„å€¼&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(&#x27;finally2åé¢çš„thenå‡½æ•°&#x27;, res)</span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">finally2</span><br><span class="line">finally</span><br><span class="line">finally2åé¢çš„thenå‡½æ•° 2</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><code>.finally()</code>ä¸€èˆ¬ç”¨çš„å¾ˆå°‘ï¼Œåªè¦è®°ä½ä»¥ä¸‹å‡ ç‚¹å°±å¯ä»¥äº†ï¼š</p>
<ul>
<li><code>.finally()</code>æ–¹æ³•ä¸ç®¡Promiseå¯¹è±¡æœ€åçš„çŠ¶æ€å¦‚ä½•éƒ½ä¼šæ‰§è¡Œ</li>
<li><code>.finally()</code>æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸æ¥å—ä»»ä½•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ åœ¨<code>.finally()</code>å‡½æ•°ä¸­æ˜¯æ— æ³•çŸ¥é“Promiseæœ€ç»ˆçš„çŠ¶æ€æ˜¯<code>resolved</code>è¿˜æ˜¯<code>rejected</code>çš„</li>
<li>å®ƒæœ€ç»ˆè¿”å›çš„é»˜è®¤ä¼šæ˜¯ä¸€ä¸ªä¸Šä¸€æ¬¡çš„Promiseå¯¹è±¡å€¼ï¼Œä¸è¿‡å¦‚æœæŠ›å‡ºçš„æ˜¯ä¸€ä¸ªå¼‚å¸¸åˆ™è¿”å›å¼‚å¸¸çš„Promiseå¯¹è±¡ã€‚</li>
<li>finallyæœ¬è´¨ä¸Šæ˜¯thenæ–¹æ³•çš„ç‰¹ä¾‹</li>
</ul>
<p><code>.finally()</code>çš„é”™è¯¯æ•è·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve(&#x27;1&#x27;)</span><br><span class="line">  .finally(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;finally1&#x27;)</span><br><span class="line">    throw new Error(&#x27;æˆ‘æ˜¯finallyä¸­æŠ›å‡ºçš„å¼‚å¸¸&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(res =&gt; &#123;</span><br><span class="line">    console.log(&#x27;finallyåé¢çš„thenå‡½æ•°&#x27;, res)</span><br><span class="line">  &#125;)</span><br><span class="line">  .catch(err =&gt; &#123;</span><br><span class="line">    console.log(&#x27;æ•è·é”™è¯¯&#x27;, err)</span><br><span class="line">  &#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x27;finally1&#x27;</span><br><span class="line">&#x27;æ•è·é”™è¯¯&#x27; Error: æˆ‘æ˜¯finallyä¸­æŠ›å‡ºçš„å¼‚å¸¸</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="14-ä»£ç è¾“å‡ºç»“æœ"><a href="#14-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="14. ä»£ç è¾“å‡ºç»“æœ"></a>14. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function runAsync (x) &#123;</span><br><span class="line">    const p = new Promise(r =&gt; setTimeout(() =&gt; r(x, console.log(x)), 1000))</span><br><span class="line">    return p</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Promise.all([runAsync(1), runAsync(2), runAsync(3)]).then(res =&gt; console.log(res))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">[1, 2, 3]</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆï¼Œå®šä¹‰äº†ä¸€ä¸ªPromiseï¼Œæ¥å¼‚æ­¥æ‰§è¡Œå‡½æ•°runAsyncï¼Œè¯¥å‡½æ•°ä¼ å…¥ä¸€ä¸ªå€¼xï¼Œç„¶åé—´éš”ä¸€ç§’åæ‰“å°å‡ºè¿™ä¸ªxã€‚</p>
<p>ä¹‹åå†ä½¿ç”¨<code>Promise.all</code>æ¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°ï¼Œæ‰§è¡Œçš„æ—¶å€™ï¼Œçœ‹åˆ°ä¸€ç§’ä¹‹åè¾“å‡ºäº†1ï¼Œ2ï¼Œ3ï¼ŒåŒæ—¶è¾“å‡ºäº†æ•°ç»„[1, 2, 3]ï¼Œä¸‰ä¸ªå‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œçš„ï¼Œå¹¶ä¸”åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­è¿”å›äº†æ‰€æœ‰çš„ç»“æœã€‚å¹¶ä¸”ç»“æœå’Œå‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸€è‡´çš„ã€‚</p>
<h3 id="15-ä»£ç è¾“å‡ºç»“æœ"><a href="#15-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="15. ä»£ç è¾“å‡ºç»“æœ"></a>15. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function runAsync (x) &#123;</span><br><span class="line">  const p = new Promise(r =&gt; setTimeout(() =&gt; r(x, console.log(x)), 1000))</span><br><span class="line">  return p</span><br><span class="line">&#125;</span><br><span class="line">function runReject (x) &#123;</span><br><span class="line">  const p = new Promise((res, rej) =&gt; setTimeout(() =&gt; rej(`Error: $&#123;x&#125;`, console.log(x)), 1000 * x))</span><br><span class="line">  return p</span><br><span class="line">&#125;</span><br><span class="line">Promise.all([runAsync(1), runReject(4), runAsync(3), runReject(2)])</span><br><span class="line">       .then(res =&gt; console.log(res))</span><br><span class="line">       .catch(err =&gt; console.log(err))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 1såè¾“å‡º</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">// 2såè¾“å‡º</span><br><span class="line">2</span><br><span class="line">Error: 2</span><br><span class="line">// 4såè¾“å‡º</span><br><span class="line">4</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ã€‚catchæ•è·åˆ°äº†ç¬¬ä¸€ä¸ªé”™è¯¯ï¼Œåœ¨è¿™é“é¢˜ç›®ä¸­æœ€å…ˆçš„é”™è¯¯å°±æ˜¯<code>runReject(2)</code>çš„ç»“æœã€‚å¦‚æœä¸€ç»„å¼‚æ­¥æ“ä½œä¸­æœ‰ä¸€ä¸ªå¼‚å¸¸éƒ½ä¸ä¼šè¿›å…¥<code>.then()</code>çš„ç¬¬ä¸€ä¸ªå›è°ƒå‡½æ•°å‚æ•°ä¸­ã€‚ä¼šè¢«<code>.then()</code>çš„ç¬¬äºŒä¸ªå›è°ƒå‡½æ•°æ•è·ã€‚</p>
<h3 id="16-ä»£ç è¾“å‡ºç»“æœ"><a href="#16-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="16. ä»£ç è¾“å‡ºç»“æœ"></a>16. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function runAsync (x) &#123;</span><br><span class="line">  const p = new Promise(r =&gt; setTimeout(() =&gt; r(x, console.log(x)), 1000))</span><br><span class="line">  return p</span><br><span class="line">&#125;</span><br><span class="line">Promise.race([runAsync(1), runAsync(2), runAsync(3)])</span><br><span class="line">  .then(res =&gt; console.log(&#x27;result: &#x27;, res))</span><br><span class="line">  .catch(err =&gt; console.log(err))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">&#x27;result: &#x27; 1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>thenåªä¼šæ•è·ç¬¬ä¸€ä¸ªæˆåŠŸçš„æ–¹æ³•ï¼Œå…¶ä»–çš„å‡½æ•°è™½ç„¶è¿˜ä¼šç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¸æ˜¯è¢«thenæ•è·äº†ã€‚</p>
<h3 id="17-ä»£ç è¾“å‡ºç»“æœ"><a href="#17-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="17. ä»£ç è¾“å‡ºç»“æœ"></a>17. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function runAsync(x) &#123;</span><br><span class="line">  const p = new Promise(r =&gt;</span><br><span class="line">    setTimeout(() =&gt; r(x, console.log(x)), 1000)</span><br><span class="line">  );</span><br><span class="line">  return p;</span><br><span class="line">&#125;</span><br><span class="line">function runReject(x) &#123;</span><br><span class="line">  const p = new Promise((res, rej) =&gt;</span><br><span class="line">    setTimeout(() =&gt; rej(`Error: $&#123;x&#125;`, console.log(x)), 1000 * x)</span><br><span class="line">  );</span><br><span class="line">  return p;</span><br><span class="line">&#125;</span><br><span class="line">Promise.race([runReject(0), runAsync(1), runAsync(2), runAsync(3)])</span><br><span class="line">  .then(res =&gt; console.log(&quot;result: &quot;, res))</span><br><span class="line">  .catch(err =&gt; console.log(err));</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">0</span><br><span class="line">Error: 0</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°åœ¨catchæ•è·åˆ°ç¬¬ä¸€ä¸ªé”™è¯¯ä¹‹åï¼Œåé¢çš„ä»£ç è¿˜ä¸æ‰§è¡Œï¼Œä¸è¿‡ä¸ä¼šå†è¢«æ•è·äº†ã€‚</p>
<p>æ³¨æ„ï¼š<code>all</code>å’Œ<code>race</code>ä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„catchæ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­å…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚</p>
<h3 id="18-ä»£ç è¾“å‡ºç»“æœ"><a href="#18-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="18. ä»£ç è¾“å‡ºç»“æœ"></a>18. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">async function async1() &#123;</span><br><span class="line">  console.log(&quot;async1 start&quot;);</span><br><span class="line">  await async2();</span><br><span class="line">  console.log(&quot;async1 end&quot;);</span><br><span class="line">&#125;</span><br><span class="line">async function async2() &#123;</span><br><span class="line">  console.log(&quot;async2&quot;);</span><br><span class="line">&#125;</span><br><span class="line">async1();</span><br><span class="line">console.log(&#x27;start&#x27;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">async1 start</span><br><span class="line">async2</span><br><span class="line">start</span><br><span class="line">async1 end</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œå‡½æ•°ä¸­çš„åŒæ­¥ä»£ç <code>async1 start</code>ï¼Œä¹‹åé‡åˆ°äº†<code>await</code>ï¼Œå®ƒä¼šé˜»å¡<code>async1</code>åé¢ä»£ç çš„æ‰§è¡Œï¼Œå› æ­¤ä¼šå…ˆå»æ‰§è¡Œ<code>async2</code>ä¸­çš„åŒæ­¥ä»£ç <code>async2</code>ï¼Œç„¶åè·³å‡º<code>async1</code>ï¼›</li>
<li>è·³å‡º<code>async1</code>å‡½æ•°åï¼Œæ‰§è¡ŒåŒæ­¥ä»£ç <code>start</code>ï¼›</li>
<li>åœ¨ä¸€è½®å®ä»»åŠ¡å…¨éƒ¨æ‰§è¡Œå®Œä¹‹åï¼Œå†æ¥æ‰§è¡Œ<code>await</code>åé¢çš„å†…å®¹<code>async1 end</code>ã€‚</li>
</ol>
<p>è¿™é‡Œå¯ä»¥ç†è§£ä¸ºawaitåé¢çš„è¯­å¥ç›¸å½“äºæ”¾åˆ°äº†new Promiseä¸­ï¼Œä¸‹ä¸€è¡ŒåŠä¹‹åçš„è¯­å¥ç›¸å½“äºæ”¾åœ¨Promise.thenä¸­ã€‚</p>
<h3 id="19-ä»£ç è¾“å‡ºç»“æœ"><a href="#19-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="19. ä»£ç è¾“å‡ºç»“æœ"></a>19. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">async function async1() &#123;</span><br><span class="line">  console.log(&quot;async1 start&quot;);</span><br><span class="line">  await async2();</span><br><span class="line">  console.log(&quot;async1 end&quot;);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;timer1&#x27;)</span><br><span class="line">  &#125;, 0)</span><br><span class="line">&#125;</span><br><span class="line">async function async2() &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;timer2&#x27;)</span><br><span class="line">  &#125;, 0)</span><br><span class="line">  console.log(&quot;async2&quot;);</span><br><span class="line">&#125;</span><br><span class="line">async1();</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;timer3&#x27;)</span><br><span class="line">&#125;, 0)</span><br><span class="line">console.log(&quot;start&quot;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">async1 start</span><br><span class="line">async2</span><br><span class="line">start</span><br><span class="line">async1 end</span><br><span class="line">timer2</span><br><span class="line">timer3</span><br><span class="line">timer1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆè¿›å…¥<code>async1</code>ï¼Œæ‰“å°å‡º<code>async1 start</code>ï¼›</li>
<li>ä¹‹åé‡åˆ°<code>async2</code>ï¼Œè¿›å…¥<code>async2</code>ï¼Œé‡åˆ°å®šæ—¶å™¨<code>timer2</code>ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°<code>async2</code>ï¼›</li>
<li>ç”±äº<code>async2</code>é˜»å¡äº†åé¢ä»£ç çš„æ‰§è¡Œï¼Œæ‰€ä»¥æ‰§è¡Œåé¢çš„å®šæ—¶å™¨<code>timer3</code>ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¹‹åæ‰“å°<code>start</code>ï¼›</li>
<li>ç„¶åæ‰§è¡Œasync2åé¢çš„ä»£ç ï¼Œæ‰“å°å‡º<code>async1 end</code>ï¼Œé‡åˆ°å®šæ—¶å™¨timer1ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æœ€åï¼Œå®ä»»åŠ¡é˜Ÿåˆ—æœ‰ä¸‰ä¸ªä»»åŠ¡ï¼Œå…ˆåé¡ºåºä¸º<code>timer2</code>ï¼Œ<code>timer3</code>ï¼Œ<code>timer1</code>ï¼Œæ²¡æœ‰å¾®ä»»åŠ¡ï¼Œæ‰€ä»¥ç›´æ¥æ‰€æœ‰çš„å®ä»»åŠ¡æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„åŸåˆ™æ‰§è¡Œã€‚</li>
</ol>
<h3 id="20-ä»£ç è¾“å‡ºç»“æœ"><a href="#20-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="20. ä»£ç è¾“å‡ºç»“æœ"></a>20. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">async function async1 () &#123;</span><br><span class="line">  console.log(&#x27;async1 start&#x27;);</span><br><span class="line">  await new Promise(resolve =&gt; &#123;</span><br><span class="line">    console.log(&#x27;promise1&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(&#x27;async1 success&#x27;);</span><br><span class="line">  return &#x27;async1 end&#x27;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;srcipt start&#x27;)</span><br><span class="line">async1().then(res =&gt; console.log(res))</span><br><span class="line">console.log(&#x27;srcipt end&#x27;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨<code>async1</code>ä¸­<code>await</code>åé¢çš„Promiseæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€å§‹ç»ˆæ˜¯<code>pending</code>çŠ¶æ€ï¼Œæ‰€ä»¥åœ¨<code>await</code>ä¹‹åçš„å†…å®¹æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼ŒåŒ…æ‹¬<code>async1</code>åé¢çš„ <code>.then</code>ã€‚</p>
<h3 id="21-ä»£ç è¾“å‡ºç»“æœ"><a href="#21-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="21. ä»£ç è¾“å‡ºç»“æœ"></a>21. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">async function async1 () &#123;</span><br><span class="line">  console.log(&#x27;async1 start&#x27;);</span><br><span class="line">  await new Promise(resolve =&gt; &#123;</span><br><span class="line">    console.log(&#x27;promise1&#x27;)</span><br><span class="line">    resolve(&#x27;promise1 resolve&#x27;)</span><br><span class="line">  &#125;).then(res =&gt; console.log(res))</span><br><span class="line">  console.log(&#x27;async1 success&#x27;);</span><br><span class="line">  return &#x27;async1 end&#x27;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&#x27;srcipt start&#x27;)</span><br><span class="line">async1().then(res =&gt; console.log(res))</span><br><span class="line">console.log(&#x27;srcipt end&#x27;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæ˜¯å¯¹ä¸Šé¢ä¸€é¢˜è¿›è¡Œäº†æ”¹é€ ï¼ŒåŠ ä¸Šäº†resolveã€‚</p>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">promise1 resolve</span><br><span class="line">async1 success</span><br><span class="line">async1 end</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="22-ä»£ç è¾“å‡ºç»“æœ"><a href="#22-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="22. ä»£ç è¾“å‡ºç»“æœ"></a>22. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">async function async1() &#123;</span><br><span class="line">  console.log(&quot;async1 start&quot;);</span><br><span class="line">  await async2();</span><br><span class="line">  console.log(&quot;async1 end&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function async2() &#123;</span><br><span class="line">  console.log(&quot;async2&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">console.log(&quot;script start&quot;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&quot;setTimeout&quot;);</span><br><span class="line">&#125;, 0);</span><br><span class="line"></span><br><span class="line">async1();</span><br><span class="line"></span><br><span class="line">new Promise(resolve =&gt; &#123;</span><br><span class="line">  console.log(&quot;promise1&quot;);</span><br><span class="line">  resolve();</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">  console.log(&quot;promise2&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(&#x27;script end&#x27;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1 start</span><br><span class="line">async2</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">async1 end</span><br><span class="line">promise2</span><br><span class="line">setTimeout</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å¼€å¤´å®šä¹‰äº†async1å’Œasync2ä¸¤ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å¹¶æœªæ‰§è¡Œï¼Œæ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰€ä»¥æ‰“å°å‡ºscript startï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨Settimeoutï¼Œå®ƒæ˜¯ä¸€ä¸ªå®ä»»åŠ¡ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ä¹‹åæ‰§è¡Œå‡½æ•°async1ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 startï¼›</li>
<li>é‡åˆ°awaitï¼Œæ‰§è¡Œasync2ï¼Œæ‰“å°å‡ºasync2ï¼Œå¹¶é˜»æ–­åé¢ä»£ç çš„æ‰§è¡Œï¼Œå°†åé¢çš„ä»£ç åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç„¶åè·³å‡ºasync1å’Œasync2ï¼Œé‡åˆ°Promiseï¼Œæ‰“å°å‡ºpromise1ï¼›</li>
<li>é‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç„¶åæ‰§è¡Œåé¢çš„scriptä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›</li>
<li>ä¹‹åå°±è¯¥æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—äº†ï¼Œé¦–å…ˆæ‰“å°å‡ºasync1 endï¼Œç„¶åæ‰“å°å‡ºpromise2ï¼›</li>
<li>æ‰§è¡Œå®Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå°±å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å®šæ—¶å™¨ï¼Œæ‰“å°å‡ºsetTimeoutã€‚</li>
</ol>
<h3 id="23-ä»£ç è¾“å‡ºç»“æœ"><a href="#23-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="23. ä»£ç è¾“å‡ºç»“æœ"></a>23. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">async function async1 () &#123;</span><br><span class="line">  await async2();</span><br><span class="line">  console.log(&#x27;async1&#x27;);</span><br><span class="line">  return &#x27;async1 success&#x27;</span><br><span class="line">&#125;</span><br><span class="line">async function async2 () &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    console.log(&#x27;async2&#x27;)</span><br><span class="line">    reject(&#x27;error&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">async1().then(res =&gt; console.log(res))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">async2</span><br><span class="line">Uncaught (in promise) error</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœasyncå‡½æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šç»ˆæ­¢é”™è¯¯ç»“æœï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚</p>
<p>å¦‚æœæƒ³è¦è®©é”™è¯¯ä¸è¶³ä¹‹å¤„åé¢çš„ä»£ç æ‰§è¡Œï¼Œå¯ä»¥ä½¿ç”¨catchæ¥æ•è·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">async function async1 () &#123;</span><br><span class="line">  await Promise.reject(&#x27;error!!!&#x27;).catch(e =&gt; console.log(e))</span><br><span class="line">  console.log(&#x27;async1&#x27;);</span><br><span class="line">  return Promise.resolve(&#x27;async1 success&#x27;)</span><br><span class="line">&#125;</span><br><span class="line">async1().then(res =&gt; console.log(res))</span><br><span class="line">console.log(&#x27;script start&#x27;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¿™æ ·çš„è¾“å‡ºç»“æœå°±æ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">error!!!</span><br><span class="line">async1</span><br><span class="line">async1 success</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="24-ä»£ç è¾“å‡ºç»“æœ"><a href="#24-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="24. ä»£ç è¾“å‡ºç»“æœ"></a>24. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">const first = () =&gt; (new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    console.log(3);</span><br><span class="line">    let p = new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">        console.log(7);</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">            console.log(5);</span><br><span class="line">            resolve(6);</span><br><span class="line">            console.log(p)</span><br><span class="line">        &#125;, 0)</span><br><span class="line">        resolve(1);</span><br><span class="line">    &#125;);</span><br><span class="line">    resolve(2);</span><br><span class="line">    p.then((arg) =&gt; &#123;</span><br><span class="line">        console.log(arg);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;));</span><br><span class="line">first().then((arg) =&gt; &#123;</span><br><span class="line">    console.log(arg);</span><br><span class="line">&#125;);</span><br><span class="line">console.log(4);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">3</span><br><span class="line">7</span><br><span class="line">4</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line">Promise&#123;&lt;resolved&gt;: 1&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆä¼šè¿›å…¥Promiseï¼Œæ‰“å°å‡º3ï¼Œä¹‹åè¿›å…¥ä¸‹é¢çš„Promiseï¼Œæ‰“å°å‡º7ï¼›</li>
<li>é‡åˆ°äº†å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡ŒPromise  pä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º1ï¼›</li>
<li>æ‰§è¡ŒPromise firstä¸­çš„resolveï¼ŒçŠ¶æ€å˜ä¸ºresolvedï¼Œè¿”å›å€¼ä¸º2ï¼›</li>
<li>é‡åˆ°p.thenï¼Œå°†å…¶åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°first().thenï¼Œå°†å…¶åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå¤–é¢çš„ä»£ç ï¼Œæ‰“å°å‡º4ï¼›</li>
<li>è¿™æ ·ç¬¬ä¸€è½®å®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œå…ˆåæ‰“å°å‡º1å’Œ2ï¼›</li>
<li>è¿™æ ·å¾®ä»»åŠ¡å°±æ‰§è¡Œå®Œäº†ï¼Œå¼€å§‹æ‰§è¡Œä¸‹ä¸€è½®å®ä»»åŠ¡ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰§è¡Œå®ƒï¼Œæ‰“å°å‡º5ï¼Œç”±äºæ‰§è¡Œå·²ç»å˜ä¸ºresolvedçŠ¶æ€ï¼Œæ‰€ä»¥<code>resolve(6)</code>ä¸ä¼šå†æ‰§è¡Œï¼›</li>
<li>æœ€å<code>console.log(p)</code>æ‰“å°å‡º<code>Promise&#123;&lt;resolved&gt;: 1&#125;</code>ï¼›</li>
</ol>
<h3 id="25-ä»£ç è¾“å‡ºç»“æœ"><a href="#25-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="25. ä»£ç è¾“å‡ºç»“æœ"></a>25. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const async1 = async () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;async1&#x27;);</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;timer1&#x27;)</span><br><span class="line">  &#125;, 2000)</span><br><span class="line">  await new Promise(resolve =&gt; &#123;</span><br><span class="line">    console.log(&#x27;promise1&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(&#x27;async1 end&#x27;)</span><br><span class="line">  return &#x27;async1 success&#x27;</span><br><span class="line">&#125; </span><br><span class="line">console.log(&#x27;script start&#x27;);</span><br><span class="line">async1().then(res =&gt; console.log(res));</span><br><span class="line">console.log(&#x27;script end&#x27;);</span><br><span class="line">Promise.resolve(1)</span><br><span class="line">  .then(2)</span><br><span class="line">  .then(Promise.resolve(3))</span><br><span class="line">  .catch(4)</span><br><span class="line">  .then(res =&gt; console.log(res))</span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;timer2&#x27;)</span><br><span class="line">&#125;, 1000)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">script start</span><br><span class="line">async1</span><br><span class="line">promise1</span><br><span class="line">script end</span><br><span class="line">1</span><br><span class="line">timer2</span><br><span class="line">timer1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡ŒåŒæ­¥å¸¦å—ï¼Œæ‰“å°å‡ºscript startï¼›</li>
<li>é‡åˆ°å®šæ—¶å™¨timer1å°†å…¶åŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ä¹‹åæ˜¯æ‰§è¡ŒPromiseï¼Œæ‰“å°å‡ºpromise1ï¼Œç”±äºPromiseæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥åé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼›</li>
<li>ç„¶åæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œæ‰“å°å‡ºscript endï¼›</li>
<li>ç»§ç»­æ‰§è¡Œä¸‹é¢çš„Promiseï¼Œ.thenå’Œ.catchæœŸæœ›å‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™é‡Œä¼ å…¥çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå› æ­¤å°±ä¼šå‘ç”Ÿå€¼æ¸—é€ï¼Œå°†resolve(1)çš„å€¼ä¼ åˆ°æœ€åä¸€ä¸ªthenï¼Œç›´æ¥æ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ŒæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œä¸¤ä¸ªå®šæ—¶å™¨ï¼Œä½†æ˜¯ç”±äºå®šæ—¶å™¨æ—¶é—´çš„åŸå› ï¼Œä¼šåœ¨ä¸¤ç§’åå…ˆæ‰“å°å‡ºtimer2ï¼Œåœ¨å››ç§’åæ‰“å°å‡ºtimer1ã€‚</li>
</ol>
<h3 id="26-ä»£ç è¾“å‡ºç»“æœ"><a href="#26-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="26. ä»£ç è¾“å‡ºç»“æœ"></a>26. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">const p1 = new Promise((resolve) =&gt; &#123;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    resolve(&#x27;resolve3&#x27;);</span><br><span class="line">    console.log(&#x27;timer1&#x27;)</span><br><span class="line">  &#125;, 0)</span><br><span class="line">  resolve(&#x27;resovle1&#x27;);</span><br><span class="line">  resolve(&#x27;resolve2&#x27;);</span><br><span class="line">&#125;).then(res =&gt; &#123;</span><br><span class="line">  console.log(res)  // resolve1</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">    console.log(p1)</span><br><span class="line">  &#125;, 1000)</span><br><span class="line">&#125;).finally(res =&gt; &#123;</span><br><span class="line">  console.log(&#x27;finally&#x27;, res)</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœä¸ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve1</span><br><span class="line">finally  undefined</span><br><span class="line">timer1</span><br><span class="line">Promise&#123;&lt;resolved&gt;: undefined&#125;</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯æœ€åä¸€ä¸ªå®šæ—¶å™¨æ‰“å°å‡ºçš„p1å…¶å®æ˜¯<code>.finally</code>çš„è¿”å›å€¼ï¼Œæˆ‘ä»¬çŸ¥é“<code>.finally</code>çš„è¿”å›å€¼å¦‚æœåœ¨æ²¡æœ‰æŠ›å‡ºé”™è¯¯çš„æƒ…å†µä¸‹é»˜è®¤ä¼šæ˜¯ä¸Šä¸€ä¸ªPromiseçš„è¿”å›å€¼ï¼Œè€Œè¿™é“é¢˜ä¸­<code>.finally</code>ä¸Šä¸€ä¸ªPromiseæ˜¯<code>.then()</code>ï¼Œä½†æ˜¯è¿™ä¸ª<code>.then()</code>å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥p1æ‰“å°å‡ºæ¥çš„Promiseçš„å€¼ä¼šæ˜¯<code>undefined</code>ï¼Œå¦‚æœåœ¨å®šæ—¶å™¨çš„ä¸‹é¢åŠ ä¸Šä¸€ä¸ª<code>return 1</code>ï¼Œåˆ™å€¼å°±ä¼šå˜æˆ1ã€‚</p>
<h3 id="27-ä»£ç è¾“å‡ºç»“æœ"><a href="#27-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="27. ä»£ç è¾“å‡ºç»“æœ"></a>27. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;1&#x27;);</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">    console.log(&#x27;2&#x27;);</span><br><span class="line">    process.nextTick(function() &#123;</span><br><span class="line">        console.log(&#x27;3&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line">    new Promise(function(resolve) &#123;</span><br><span class="line">        console.log(&#x27;4&#x27;);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(function() &#123;</span><br><span class="line">        console.log(&#x27;5&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">process.nextTick(function() &#123;</span><br><span class="line">    console.log(&#x27;6&#x27;);</span><br><span class="line">&#125;)</span><br><span class="line">new Promise(function(resolve) &#123;</span><br><span class="line">    console.log(&#x27;7&#x27;);</span><br><span class="line">    resolve();</span><br><span class="line">&#125;).then(function() &#123;</span><br><span class="line">    console.log(&#x27;8&#x27;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(function() &#123;</span><br><span class="line">    console.log(&#x27;9&#x27;);</span><br><span class="line">    process.nextTick(function() &#123;</span><br><span class="line">        console.log(&#x27;10&#x27;);</span><br><span class="line">    &#125;)</span><br><span class="line">    new Promise(function(resolve) &#123;</span><br><span class="line">        console.log(&#x27;11&#x27;);</span><br><span class="line">        resolve();</span><br><span class="line">    &#125;).then(function() &#123;</span><br><span class="line">        console.log(&#x27;12&#x27;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">7</span><br><span class="line">6</span><br><span class="line">8</span><br><span class="line">2</span><br><span class="line">4</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">9</span><br><span class="line">11</span><br><span class="line">10</span><br><span class="line">12</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>ï¼ˆ1ï¼‰ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æµç¨‹åˆ†æå¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ•´ä½“scriptä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡è¿›å…¥ä¸»çº¿ç¨‹ï¼Œé‡åˆ°<code>console.log</code>ï¼Œè¾“å‡º1ã€‚</li>
<li>é‡åˆ°<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ã€‚æš‚ä¸”è®°ä¸º<code>setTimeout1</code>ã€‚</li>
<li>é‡åˆ°<code>process.nextTick()</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>process1</code>ã€‚</li>
<li>é‡åˆ°<code>Promise</code>ï¼Œ<code>new Promise</code>ç›´æ¥æ‰§è¡Œï¼Œè¾“å‡º7ã€‚<code>then</code>è¢«åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>then1</code>ã€‚</li>
<li>åˆé‡åˆ°äº†<code>setTimeout</code>ï¼Œå…¶å›è°ƒå‡½æ•°è¢«åˆ†å‘åˆ°å®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>setTimeout2</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td>setTimeout1</td>
<td>process1</td>
</tr>
<tr>
<td>setTimeout2</td>
<td>then1</td>
</tr>
</tbody></table>
<p>ä¸Šè¡¨æ˜¯ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸæ—¶å„Event Queueçš„æƒ…å†µï¼Œæ­¤æ—¶å·²ç»è¾“å‡ºäº†1å’Œ7ã€‚å‘ç°äº†<code>process1</code>å’Œ<code>then1</code>ä¸¤ä¸ªå¾®ä»»åŠ¡ï¼š</p>
<ul>
<li>æ‰§è¡Œ<code>process1</code>ï¼Œè¾“å‡º6ã€‚</li>
<li>æ‰§è¡Œ<code>then1</code>ï¼Œè¾“å‡º8ã€‚</li>
</ul>
<p>ç¬¬ä¸€è½®äº‹ä»¶å¾ªç¯æ­£å¼ç»“æŸï¼Œè¿™ä¸€è½®çš„ç»“æœæ˜¯è¾“å‡º1ï¼Œ7ï¼Œ6ï¼Œ8ã€‚</p>
<p><strong>ï¼ˆ2ï¼‰ç¬¬äºŒè½®æ—¶é—´å¾ªç¯ä»</strong><code>**setTimeout1**</code><strong>å®ä»»åŠ¡å¼€å§‹ï¼š</strong></p>
<ul>
<li>é¦–å…ˆè¾“å‡º2ã€‚æ¥ä¸‹æ¥é‡åˆ°äº†<code>process.nextTick()</code>ï¼ŒåŒæ ·å°†å…¶åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>process2</code>ã€‚</li>
<li><code>new Promise</code>ç«‹å³æ‰§è¡Œè¾“å‡º4ï¼Œ<code>then</code>ä¹Ÿåˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then2</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td>setTimeout2</td>
<td>process2</td>
</tr>
<tr>
<td></td>
<td>then2</td>
</tr>
</tbody></table>
<p>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡ç»“æŸï¼Œå‘ç°æœ‰<code>process2</code>å’Œ<code>then2</code>ä¸¤ä¸ªå¾®ä»»åŠ¡å¯ä»¥æ‰§è¡Œï¼š</p>
<ul>
<li>è¾“å‡º3ã€‚</li>
<li>è¾“å‡º5ã€‚</li>
</ul>
<p>ç¬¬äºŒè½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬äºŒè½®è¾“å‡º2ï¼Œ4ï¼Œ3ï¼Œ5ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å¼€å§‹ï¼Œæ­¤æ—¶åªå‰©setTimeout2äº†ï¼Œæ‰§è¡Œã€‚</strong></p>
<ul>
<li>ç›´æ¥è¾“å‡º9ã€‚</li>
<li>å°†<code>process.nextTick()</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ã€‚è®°ä¸º<code>process3</code>ã€‚</li>
<li>ç›´æ¥æ‰§è¡Œ<code>new Promise</code>ï¼Œè¾“å‡º11ã€‚</li>
<li>å°†<code>then</code>åˆ†å‘åˆ°å¾®ä»»åŠ¡Event Queueä¸­ï¼Œè®°ä¸º<code>then3</code>ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th>å®ä»»åŠ¡Event Queue</th>
<th>å¾®ä»»åŠ¡Event Queue</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>process3</td>
</tr>
<tr>
<td></td>
<td>then3</td>
</tr>
</tbody></table>
<p>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯å®ä»»åŠ¡æ‰§è¡Œç»“æŸï¼Œæ‰§è¡Œä¸¤ä¸ªå¾®ä»»åŠ¡<code>process3</code>å’Œ<code>then3</code>ï¼š</p>
<ul>
<li>è¾“å‡º10ã€‚</li>
<li>è¾“å‡º12ã€‚</li>
</ul>
<p>ç¬¬ä¸‰è½®äº‹ä»¶å¾ªç¯ç»“æŸï¼Œç¬¬ä¸‰è½®è¾“å‡º9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</p>
<p>æ•´æ®µä»£ç ï¼Œå…±è¿›è¡Œäº†ä¸‰æ¬¡äº‹ä»¶å¾ªç¯ï¼Œå®Œæ•´çš„è¾“å‡ºä¸º1ï¼Œ7ï¼Œ6ï¼Œ8ï¼Œ2ï¼Œ4ï¼Œ3ï¼Œ5ï¼Œ9ï¼Œ11ï¼Œ10ï¼Œ12ã€‚</p>
<h3 id="28-ä»£ç è¾“å‡ºç»“æœ"><a href="#28-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="28. ä»£ç è¾“å‡ºç»“æœ"></a>28. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">console.log(1)</span><br><span class="line"></span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(2)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">new Promise(resolve =&gt;  &#123;</span><br><span class="line">  console.log(3)</span><br><span class="line">  resolve(4)</span><br><span class="line">&#125;).then(d =&gt; console.log(d))</span><br><span class="line"></span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(5)</span><br><span class="line">  new Promise(resolve =&gt;  &#123;</span><br><span class="line">    resolve(6)</span><br><span class="line">  &#125;).then(d =&gt; console.log(d))</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(7)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(8)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">3</span><br><span class="line">8</span><br><span class="line">4</span><br><span class="line">2</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œæ‰§è¡Œä»£ç ï¼Œæ‰“å°å‡º3ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸‰ä¸ªå®šæ—¶å™¨ï¼ŒåŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º8ï¼Œç¬¬ä¸€è½®æ‰§è¡Œç»“æŸï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡ºç¬¬ä¸€ä¸ªPromiseçš„resolveç»“æœï¼š4ï¼›</li>
<li>å¼€å§‹æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º2ï¼›</li>
<li>æ­¤æ—¶æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œé¦–å…ˆæ‰“å°å‡º5ï¼Œé‡åˆ°Promiseï¼Œé¦–é€‰æ‰“å°å‡º6ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º6ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º7ã€‚</li>
</ol>
<h3 id="29-ä»£ç è¾“å‡ºç»“æœ"><a href="#29-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="29. ä»£ç è¾“å‡ºç»“æœ"></a>29. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">console.log(1);</span><br><span class="line">    </span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(2);</span><br><span class="line">  Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(3)</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">  console.log(4)</span><br><span class="line">  resolve(5)</span><br><span class="line">&#125;).then((data) =&gt; &#123;</span><br><span class="line">  console.log(data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">setTimeout(() =&gt; &#123;</span><br><span class="line">  console.log(6);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">console.log(7);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">4</span><br><span class="line">7</span><br><span class="line">5</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">6</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œscripä»£ç ï¼Œæ‰“å°å‡º1ï¼›</li>
<li>é‡åˆ°ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º4ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°ç¬¬äºŒä¸ªå®šæ—¶å™¨setTimeoutï¼Œå°†å…¶åŠ å…¥åˆ°çº¢ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œscriptä»£ç ï¼Œæ‰“å°å‡º7ï¼Œè‡³æ­¤ç¬¬ä¸€è½®æ‰§è¡Œå®Œæˆï¼›</li>
<li>æŒ‡å®šå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œæ‰“å°å‡ºresolveçš„ç»“æœï¼š5ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡ä¸­çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨setTimeoutï¼Œé¦–å…ˆæ‰“å°å‡º2ï¼Œç„¶åé‡åˆ° Promise.resolve().then()ï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>æ‰§è¡Œå®Œè¿™ä¸ªå®ä»»åŠ¡ï¼Œå°±å¼€å§‹æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º3ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="30-ä»£ç è¾“å‡ºç»“æœ"><a href="#30-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="30. ä»£ç è¾“å‡ºç»“æœ"></a>30. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Promise.resolve().then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;1&#x27;);</span><br><span class="line">    throw &#x27;Error&#x27;;</span><br><span class="line">&#125;).then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;2&#x27;);</span><br><span class="line">&#125;).catch(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;3&#x27;);</span><br><span class="line">    throw &#x27;Error&#x27;;</span><br><span class="line">&#125;).then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;4&#x27;);</span><br><span class="line">&#125;).catch(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;5&#x27;);</span><br><span class="line">&#125;).then(() =&gt; &#123;</span><br><span class="line">    console.log(&#x27;6&#x27;);</span><br><span class="line">&#125;);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 </span><br><span class="line">3 </span><br><span class="line">5 </span><br><span class="line">6</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™é“é¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæ— è®ºæ˜¯thneè¿˜æ˜¯catchä¸­ï¼Œåªè¦throw æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šè¢«catchæ•è·ï¼Œå¦‚æœæ²¡æœ‰throwå‡ºé”™è¯¯ï¼Œå°±è¢«ç»§ç»­æ‰§è¡Œåé¢çš„thenã€‚</p>
<h3 id="31-ä»£ç è¾“å‡ºç»“æœ"><a href="#31-ä»£ç è¾“å‡ºç»“æœ" class="headerlink" title="31. ä»£ç è¾“å‡ºç»“æœ"></a>31. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function () &#123;</span><br><span class="line">  console.log(1);</span><br><span class="line">&#125;, 100);</span><br><span class="line"></span><br><span class="line">new Promise(function (resolve) &#123;</span><br><span class="line">  console.log(2);</span><br><span class="line">  resolve();</span><br><span class="line">  console.log(3);</span><br><span class="line">&#125;).then(function () &#123;</span><br><span class="line">  console.log(4);</span><br><span class="line">  new Promise((resove, reject) =&gt; &#123;</span><br><span class="line">    console.log(5);</span><br><span class="line">    setTimeout(() =&gt;  &#123;</span><br><span class="line">      console.log(6);</span><br><span class="line">    &#125;, 10);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;);</span><br><span class="line">console.log(7);</span><br><span class="line">console.log(8);</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœä¸ºï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">2</span><br><span class="line">3</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">1</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ä»£ç æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>é¦–å…ˆé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ï¼›</li>
<li>é‡åˆ°Promiseï¼Œé¦–å…ˆæ‰§è¡Œé‡Œé¢çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º2ï¼Œé‡åˆ°resolveï¼Œå°†å…¶åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰§è¡Œåé¢åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º3ï¼›</li>
<li>ç»§ç»­æ‰§è¡Œscriptä¸­çš„ä»£ç ï¼Œæ‰“å°å‡º7å’Œ8ï¼Œè‡³æ­¤ç¬¬ä¸€è½®ä»£ç æ‰§è¡Œå®Œæˆï¼›</li>
<li>æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œé¦–å…ˆæ‰“å°å‡º4ï¼Œå¦‚é‡åˆ°Promiseï¼Œæ‰§è¡Œå…¶ä¸­çš„åŒæ­¥ä»£ç ï¼Œæ‰“å°å‡º5ï¼Œé‡åˆ°å®šæ—¶å™¨ï¼Œå°†å…¶åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œæ­¤æ—¶å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æœ‰ä¸¤ä¸ªå®šæ—¶å™¨ï¼›</li>
<li>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„æ˜¯çš„ç¬¬ä¸€ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º100msï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨çš„æ—¶é—´ä¸º10msï¼Œæ‰€ä»¥å…ˆæ‰§è¡Œç¬¬äºŒä¸ªå®šæ—¶å™¨ï¼Œæ‰“å°å‡º6ï¼›</li>
<li>æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œç»§ç»­æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ‰“å°å‡º1ã€‚</li>
</ol>
<p>åšå®Œè¿™é“é¢˜ç›®ï¼Œæˆ‘ä»¬å°±éœ€è¦æ ¼å¤–æ³¨æ„ï¼Œæ¯ä¸ªå®šæ—¶å™¨çš„æ—¶é—´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰å®šæ—¶å™¨çš„æ—¶é—´éƒ½ä¸º0å“¦ã€‚</p>
<h2 id="äºŒã€this"><a href="#äºŒã€this" class="headerlink" title="äºŒã€this (!)"></a>äºŒã€this (!)</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="variable language_">this</span>.<span class="property">a</span> );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">doFoo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">foo</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">doFoo</span>: doFoo</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">2</span>; </span><br><span class="line">obj.<span class="title function_">doFoo</span>()</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š2</p>
<p>åœ¨Javascriptä¸­ï¼ŒthisæŒ‡å‘å‡½æ•°æ‰§è¡Œæ—¶çš„å½“å‰å¯¹è±¡ã€‚åœ¨æ‰§è¡Œfooçš„æ—¶å€™ï¼Œæ‰§è¡Œç¯å¢ƒå°±æ˜¯doFooå‡½æ•°ï¼Œæ‰§è¡Œç¯å¢ƒä¸ºå…¨å±€ã€‚æ‰€ä»¥ï¼Œfooä¸­çš„thisæ˜¯æŒ‡å‘windowçš„ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º2ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">say</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.<span class="title function_">say</span>() </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> anotherObj = &#123; <span class="attr">a</span>: <span class="number">30</span> &#125; </span><br><span class="line">obj.<span class="property">say</span>.<span class="title function_">apply</span>(anotherObj) </span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š10 10</p>
<p>æˆ‘ä¹ˆçŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæ¥è‡ªåŸå…¶çˆ¶çº§æ‰€å¤„çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥é¦–å…ˆä¼šæ‰“å°å…¨å±€ä¸­çš„ a çš„å€¼10ã€‚åé¢è™½ç„¶è®©sayæ–¹æ³•æŒ‡å‘äº†å¦å¤–ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯ä»ä¸èƒ½æ”¹å˜ç®­å¤´å‡½æ•°çš„ç‰¹æ€§ï¼Œå®ƒçš„thisä»ç„¶æ˜¯æŒ‡å‘å…¨å±€çš„ï¼Œæ‰€ä»¥ä¾æ—§ä¼šè¾“å‡º10ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰å®Œå…¨ä¸ä¸€æ ·çš„ç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>  </span><br><span class="line"><span class="keyword">var</span> obj = &#123;  </span><br><span class="line">  <span class="attr">a</span>: <span class="number">20</span>,  </span><br><span class="line">  <span class="title function_">say</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>)  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;  </span><br><span class="line">obj.<span class="title function_">say</span>()   </span><br><span class="line"><span class="keyword">var</span> anotherObj=&#123;<span class="attr">a</span>:<span class="number">30</span>&#125;   </span><br><span class="line">obj.<span class="property">say</span>.<span class="title function_">apply</span>(anotherObj)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š20 30</p>
<p>è¿™æ—¶ï¼Œsayæ–¹æ³•ä¸­çš„thiså°±ä¼šæŒ‡å‘ä»–æ‰€åœ¨çš„å¯¹è±¡ï¼Œè¾“å‡ºå…¶ä¸­çš„açš„å€¼ã€‚</p>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">a.<span class="title function_">call</span>(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>æ‰“å°ç»“æœï¼šwindowå¯¹è±¡</p>
<p>æ ¹æ®ECMAScript262è§„èŒƒè§„å®šï¼šå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥çš„å¯¹è±¡è°ƒç”¨è€…æ˜¯nullæˆ–è€…undefinedï¼Œcallæ–¹æ³•å°†æŠŠå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ä¸Šæ˜¯windowå¯¹è±¡ï¼‰ä½œä¸ºthisçš„å€¼ã€‚æ‰€ä»¥ï¼Œä¸ç®¡ä¼ å…¥null è¿˜æ˜¯ undefinedï¼Œå…¶thiséƒ½æ˜¯å…¨å±€å¯¹è±¡windowã€‚æ‰€ä»¥ï¼Œåœ¨æµè§ˆå™¨ä¸Šç­”æ¡ˆæ˜¯è¾“å‡º window å¯¹è±¡ã€‚</p>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œnull å°±æ˜¯ nullï¼Œundefined å°±æ˜¯ undefinedï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">a.<span class="title function_">call</span>(<span class="literal">null</span>); <span class="comment">// null</span></span><br><span class="line">a.<span class="title function_">call</span>(<span class="literal">undefined</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-ï¼ˆ-ï¼‰"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-ï¼ˆ-ï¼‰" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ ï¼ˆ!ï¼‰"></a>4. ä»£ç è¾“å‡ºç»“æœ ï¼ˆ!ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123; </span><br><span class="line">  name : <span class="string">&#x27;cuggz&#x27;</span>, </span><br><span class="line">  fun : <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>); </span><br><span class="line">  &#125; </span><br><span class="line">&#125; </span><br><span class="line">obj.<span class="title function_">fun</span>()     <span class="comment">// cuggz</span></span><br><span class="line"><span class="comment">// ç‚¹æ“ä½œç¬¦ä¼˜å…ˆçº§è¾ƒé«˜</span></span><br><span class="line"><span class="keyword">new</span> obj.<span class="title function_">fun</span>() <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨newæ„é€ å‡½æ•°æ—¶ï¼Œå…¶thisæŒ‡å‘çš„æ˜¯å…¨å±€ç¯å¢ƒwindowã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ  (!)"></a>6. ä»£ç è¾“å‡ºç»“æœ  (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">   <span class="attr">say</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="comment">// ç»‘å®šçš„sayçš„this</span></span><br><span class="line">     <span class="keyword">var</span> <span class="title function_">f1</span> = (<span class="params"></span>) =&gt;  &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1111&quot;</span>, <span class="variable language_">this</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="title function_">f1</span>();</span><br><span class="line">   &#125;,</span><br><span class="line">   <span class="attr">pro</span>: &#123;</span><br><span class="line">     <span class="comment">// ç»‘å®šçš„window</span></span><br><span class="line">     <span class="attr">getPro</span>:<span class="function">() =&gt;</span>  &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> o = obj.<span class="property">say</span>;</span><br><span class="line"><span class="title function_">o</span>();</span><br><span class="line">obj.<span class="title function_">say</span>();</span><br><span class="line">obj.<span class="property">pro</span>.<span class="title function_">getPro</span>();</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1111</span> <span class="variable language_">window</span>å¯¹è±¡</span><br><span class="line"><span class="number">1111</span> objå¯¹è±¡</span><br><span class="line"><span class="variable language_">window</span>å¯¹è±¡</span><br></pre></td></tr></table></figure>

<p><strong>è§£æï¼š</strong></p>
<ol>
<li>o()ï¼Œoæ˜¯åœ¨å…¨å±€æ‰§è¡Œçš„ï¼Œè€Œf1æ˜¯ç®­å¤´å‡½æ•°ï¼Œå®ƒæ˜¯æ²¡æœ‰ç»‘å®šthisçš„ï¼Œå®ƒçš„thisæŒ‡å‘å…¶çˆ¶çº§çš„thisï¼Œå…¶çˆ¶çº§sayæ–¹æ³•çš„thisæŒ‡å‘çš„æ˜¯å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡ºwindowï¼›</li>
<li>obj.say()ï¼Œè°è°ƒç”¨sayï¼Œsay çš„thiså°±æŒ‡å‘è°ï¼Œæ‰€ä»¥æ­¤æ—¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼›</li>
<li>obj.pro.getPro()ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œç®­å¤´å‡½æ•°æ—¶ä¸ç»‘å®šthisçš„ï¼ŒgetProå¤„äºproä¸­ï¼Œè€Œå¯¹è±¡ä¸æ„æˆå•ç‹¬çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥ç®­å¤´çš„å‡½æ•°çš„thiså°±æŒ‡å‘äº†å…¨å±€ä½œç”¨åŸŸwindowã€‚</li>
</ol>
<h3 id="7-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#7-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="7. ä»£ç è¾“å‡ºç»“æœ"></a>7. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">    <span class="attr">foo</span>: <span class="string">&quot;bar&quot;</span>,</span><br><span class="line">    <span class="attr">func</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">//thisæŒ‡å‘myObject</span></span><br><span class="line">      <span class="comment">//thisæŒ‡å‘myObject</span></span><br><span class="line">      <span class="keyword">var</span> self = <span class="variable language_">this</span>;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">foo</span>);  </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(self.<span class="property">foo</span>);  </span><br><span class="line">      (<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">// ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ŒæŒ‡å‘window</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">foo</span>);</span><br><span class="line">        <span class="comment">// å‘ä¸ŠæŸ¥è¯¢ï¼Œå¾—åˆ°self</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(self.<span class="property">foo</span>);  </span><br><span class="line">      &#125;());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">myObject.<span class="title function_">func</span>();</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼šbar bar undefined bar</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>é¦–å…ˆfuncæ˜¯ç”±myObjectè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘myObjectã€‚åˆå› ä¸ºvar self &#x3D; this;æ‰€ä»¥selfæŒ‡å‘myObjectã€‚</li>
<li>è¿™ä¸ªç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°è¡¨è¾¾å¼æ˜¯ç”±windowè°ƒç”¨çš„ï¼ŒthisæŒ‡å‘window ã€‚ç«‹å³æ‰§è¡ŒåŒ¿åå‡½æ•°çš„ä½œç”¨åŸŸå¤„äºmyObject.funcçš„ä½œç”¨åŸŸä¸­ï¼Œåœ¨è¿™ä¸ªä½œç”¨åŸŸæ‰¾ä¸åˆ°selfå˜é‡ï¼Œæ²¿ç€ä½œç”¨åŸŸé“¾å‘ä¸ŠæŸ¥æ‰¾selfå˜é‡ï¼Œæ‰¾åˆ°äº†æŒ‡å‘ myObjectå¯¹è±¡çš„selfã€‚</li>
</ol>
<h3 id="8-ä»£ç è¾“å‡ºé—®é¢˜ï¼ˆï¼ï¼‰"><a href="#8-ä»£ç è¾“å‡ºé—®é¢˜ï¼ˆï¼ï¼‰" class="headerlink" title="8. ä»£ç è¾“å‡ºé—®é¢˜ï¼ˆï¼ï¼‰"></a>8. ä»£ç è¾“å‡ºé—®é¢˜ï¼ˆï¼ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">number</span> = <span class="number">2</span>;<span class="comment">//8 40</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line"> <span class="attr">number</span>: <span class="number">3</span>,<span class="comment">//15</span></span><br><span class="line"> <span class="attr">db1</span>: (<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">   <span class="variable language_">this</span>.<span class="property">number</span> *= <span class="number">4</span>;<span class="comment">//</span></span><br><span class="line">   <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">number</span> *= <span class="number">5</span>;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;)()</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> db1 = obj.<span class="property">db1</span>;</span><br><span class="line"><span class="title function_">db1</span>();</span><br><span class="line">obj.<span class="title function_">db1</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">number</span>);     <span class="comment">// 15</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">window</span>.<span class="property">number</span>);  <span class="comment">// 40</span></span><br></pre></td></tr></table></figure>

<p>è¿™é“é¢˜ç›®çœ‹æ¸…èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯è€ƒå¯ŸthisæŒ‡å‘çš„:</p>
<ol>
<li>æ‰§è¡Œdb1()æ—¶ï¼ŒthisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥window.number * 4 &#x3D; 8ï¼Œç„¶åæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œ æ‰€ä»¥window.number * 5 &#x3D; 40ï¼›</li>
<li>æ‰§è¡Œobj.db1();æ—¶ï¼ŒthisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥obj.numer * 5 &#x3D; 15ã€‚</li>
<li>ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ç«‹å³æ‰§è¡Œå‡½æ•°è¿™é‡Œï¼Œä¹Ÿå°±æ˜¯*&#x3D;4è¿™é‡Œï¼Œæ‰§è¡Œä¹‹åï¼Œdb1å°±ä¼šå˜æˆå®ƒè¿”å›çš„å‡½æ•°äº†ï¼Œå°±ä¸ä¼šå†æ‰§è¡Œ*&#x3D;4äº†</li>
</ol>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#9-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ (!)"></a>9. ä»£ç è¾“å‡ºç»“æœ (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> length = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">length</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">length</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="attr">method</span>: <span class="keyword">function</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="title function_">fn</span>();</span><br><span class="line">    <span class="variable language_">arguments</span>[<span class="number">0</span>]();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line">obj.<span class="title function_">method</span>(fn, <span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š 10 2</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>ç¬¬ä¸€æ¬¡æ‰§è¡Œfn()ï¼ŒthisæŒ‡å‘windowå¯¹è±¡ï¼Œè¾“å‡º10ã€‚</li>
<li>ç¬¬äºŒæ¬¡æ‰§è¡Œarguments<a href="https://link.juejin.cn/?target=">0</a>ï¼Œ<strong>ç›¸å½“äºargumentsè°ƒç”¨æ–¹æ³•</strong>ï¼ŒthisæŒ‡å‘argumentsï¼Œè€Œè¿™é‡Œä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œæ•…è¾“å‡ºargumentsé•¿åº¦ä¸º2ã€‚</li>
</ol>
<h3 id="10-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#10-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="10. ä»£ç è¾“å‡ºç»“æœ"></a>10. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printA</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj=&#123;</span><br><span class="line">  <span class="attr">a</span>:<span class="number">2</span>,</span><br><span class="line">  <span class="attr">foo</span>:printA,</span><br><span class="line">  <span class="attr">bar</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">printA</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">obj.<span class="title function_">foo</span>(); <span class="comment">// 2</span></span><br><span class="line">obj.<span class="title function_">bar</span>(); <span class="comment">// 1</span></span><br><span class="line"><span class="keyword">var</span> foo = obj.<span class="property">foo</span>;</span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š 2 1 1</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>obj.foo()ï¼Œfoo çš„thisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰€ä»¥aä¼šè¾“å‡º2ï¼›</li>
<li>obj.bar()ï¼ŒprintAåœ¨baræ–¹æ³•ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶printAçš„thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›</li>
<li>foo()ï¼Œfooæ˜¯åœ¨å…¨å±€å¯¹è±¡ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›</li>
</ol>
<h3 id="11-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#11-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="11. ä»£ç è¾“å‡ºç»“æœ (!?)"></a>11. ä»£ç è¾“å‡ºç»“æœ (!?)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> x = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">var</span> y = <span class="number">4</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">x</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">y</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="attr">getX</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      	<span class="comment">// åŒ¿åå‡½æ•°thisæŒ‡å‘windowï¼Œç›¸å½“äºåˆ›å»ºäº†é—­åŒ…ï¼ŒgetXä¸­thisä¼šä»åŒ¿åå‡½æ•°ä¸­æ‰¾</span></span><br><span class="line">        <span class="keyword">var</span> x = <span class="number">5</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">x</span>;</span><br><span class="line">        &#125;();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getY</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> y = <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">y</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">getX</span>()) <span class="comment">// 3</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="title function_">getY</span>()) <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š3 6</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>æˆ‘ä»¬çŸ¥é“ï¼ŒåŒ¿åå‡½æ•°çš„thisæ˜¯æŒ‡å‘å…¨å±€å¯¹è±¡çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘windowï¼Œä¼šæ‰“å°å‡º3ï¼›</li>
<li>getYæ˜¯ç”±objè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯objå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="12-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#12-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="12. ä»£ç è¾“å‡ºç»“æœ"></a>12. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">var</span> obt = &#123; </span><br><span class="line">  <span class="attr">a</span>: <span class="number">20</span>, </span><br><span class="line">  <span class="attr">fn</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123; </span><br><span class="line">    <span class="keyword">var</span> a = <span class="number">30</span>; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span>)</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line">obt.<span class="title function_">fn</span>();  <span class="comment">// 20</span></span><br><span class="line">obt.<span class="property">fn</span>.<span class="title function_">call</span>(); <span class="comment">// 10</span></span><br><span class="line">(obt.<span class="property">fn</span>)(); <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š 20 10 20</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>obt.fn()ï¼Œfnæ˜¯ç”±obtè°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘obtå¯¹è±¡ï¼Œä¼šæ‰“å°å‡º20ï¼›</li>
<li>obt.fn.call()ï¼Œè¿™é‡Œcallçš„å‚æ•°å•¥éƒ½æ²¡å†™ï¼Œå°±è¡¨ç¤ºnullï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœcallçš„å‚æ•°ä¸ºundefinedæˆ–nullï¼Œé‚£ä¹ˆthiså°±ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡thisï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 10ï¼›</li>
<li>(obt.fn)()ï¼Œ è¿™é‡Œç»™è¡¨è¾¾å¼åŠ äº†æ‹¬å·ï¼Œè€Œæ‹¬å·çš„ä½œç”¨æ˜¯æ”¹å˜è¡¨è¾¾å¼çš„è¿ç®—é¡ºåºï¼Œè€Œåœ¨è¿™é‡ŒåŠ ä¸ä¸åŠ æ‹¬å·å¹¶æ— å½±å“ï¼›ç›¸å½“äº  obt.fn()ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 20ï¼›</li>
</ol>
<h3 id="13-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#13-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="13. ä»£ç è¾“å‡ºç»“æœ (!?)"></a>13. ä»£ç è¾“å‡ºç»“æœ (!?)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params">xx</span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">x</span> = xx;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> x = <span class="title function_">a</span>(<span class="number">5</span>);  <span class="comment">// window.x = window</span></span><br><span class="line"><span class="keyword">var</span> y = <span class="title function_">a</span>(<span class="number">6</span>);  <span class="comment">// x = 6, y = window</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">x</span>)  <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y.<span class="property">x</span>)  <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š undefined 6</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>æœ€å…³é”®çš„å°±æ˜¯var x &#x3D; a(5)ï¼Œå‡½æ•°aæ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè°ƒç”¨ï¼Œæ‰€ä»¥å‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘windowå¯¹è±¡ã€‚<strong>æ‰€ä»¥ this.x &#x3D; 5 å°±ç›¸å½“äºï¼šwindow.x &#x3D; 5ã€‚</strong>ä¹‹å return thisï¼Œä¹Ÿå°±æ˜¯è¯´ var x &#x3D; a(5) ä¸­çš„xå˜é‡çš„å€¼æ˜¯windowï¼Œè¿™é‡Œçš„xå°†å‡½æ•°å†…éƒ¨çš„xçš„å€¼è¦†ç›–äº†ã€‚ç„¶åæ‰§è¡Œconsole.log(x.x)ï¼Œ ä¹Ÿå°±æ˜¯console.log(window.x)ï¼Œè€Œwindowå¯¹è±¡ä¸­æ²¡æœ‰xå±æ€§ï¼Œæ‰€ä»¥ä¼šè¾“å‡ºundefinedã€‚</li>
<li>å½“æŒ‡å‘y.xæ—¶ï¼Œä¼šç»™å…¨å±€å˜é‡ä¸­çš„xèµ‹å€¼ä¸º6ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º6ã€‚</li>
</ol>
<h3 id="14-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#14-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="14. ä»£ç è¾“å‡ºç»“æœ"></a>14. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">something</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">foo</span>: foo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;&#125;</span><br><span class="line"></span><br><span class="line">obj1.<span class="title function_">foo</span>(<span class="number">2</span>); </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line">obj1.<span class="property">foo</span>.<span class="title function_">call</span>(obj2, <span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj2.<span class="property">a</span>); <span class="comment">// 3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = <span class="keyword">new</span> obj1.<span class="title function_">foo</span>(<span class="number">4</span>)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(bar.<span class="property">a</span>); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š 2 3 2 4</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>é¦–å…ˆæ‰§è¡Œobj1.foo(2); ä¼šåœ¨objä¸­æ·»åŠ aå±æ€§ï¼Œå…¶å€¼ä¸º2ã€‚ä¹‹åæ‰§è¡Œobj1.aï¼Œaæ˜¯å³obj1è°ƒç”¨çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘objï¼Œæ‰“å°å‡º2ï¼›</li>
<li>æ‰§è¡Œ obj1.foo.call(obj2, 3) æ—¶ï¼Œä¼šå°†fooçš„thisæŒ‡å‘obj2ï¼Œåé¢å°±å’Œä¸Šé¢ä¸€æ ·äº†ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º3ï¼›</li>
<li>obj1.aä¼šæ‰“å°å‡º2ï¼›</li>
<li>æœ€åå°±æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§äº†ï¼Œnew ç»‘å®šæ˜¯æ¯”éšå¼ç»‘å®šä¼˜å…ˆçº§é«˜ï¼Œæ‰€ä»¥ä¼šè¾“å‡º4ã€‚</li>
</ol>
<h3 id="15-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#15-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="15. ä»£ç è¾“å‡ºç»“æœ"></a>15. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params">something</span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = something</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> bar = foo.<span class="title function_">bind</span>(obj1);</span><br><span class="line"><span class="title function_">bar</span>(<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> baz = <span class="keyword">new</span> <span class="title function_">bar</span>(<span class="number">3</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1.<span class="property">a</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(baz.<span class="property">a</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š 2 2 3</p>
<p>è¿™é“é¢˜ç›®å’Œä¸Šé¢é¢˜ç›®å·®ä¸å¤šï¼Œä¸»è¦éƒ½æ˜¯è€ƒå¯Ÿthisç»‘å®šçš„ä¼˜å…ˆçº§ã€‚è®°ä½ä»¥ä¸‹ç»“è®ºå³å¯ï¼š<strong>thisç»‘å®šçš„ä¼˜å…ˆçº§ï¼šnewç»‘å®š &gt; æ˜¾å¼ç»‘å®š &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®šã€‚</strong></p>
<h2 id="ä¸‰ã€ä½œç”¨åŸŸ-amp-å˜é‡æå‡-amp-é—­åŒ…"><a href="#ä¸‰ã€ä½œç”¨åŸŸ-amp-å˜é‡æå‡-amp-é—­åŒ…" class="headerlink" title="ä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…"></a>ä¸‰ã€ä½œç”¨åŸŸ&amp;å˜é‡æå‡&amp;é—­åŒ…</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="comment">// å‡½æ•°ä½œç”¨åŸŸ</span></span><br><span class="line">   <span class="keyword">var</span> x = y = <span class="number">1</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">var</span> z;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(y); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(z); <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x); <span class="comment">// Uncaught ReferenceError: x is not defined</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç çš„å…³é”®åœ¨äºï¼švar x &#x3D; y &#x3D; 1; å®é™…ä¸Šè¿™é‡Œæ˜¯ä»å³å¾€å·¦æ‰§è¡Œçš„ï¼Œé¦–å…ˆæ‰§è¡Œy &#x3D; 1, å› ä¸ºyæ²¡æœ‰ä½¿ç”¨varå£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç„¶åç¬¬äºŒæ­¥æ˜¯å°†yèµ‹å€¼ç»™xï¼Œè®²ä¸€ä¸ªå…¨å±€å˜é‡èµ‹å€¼ç»™äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæœ€ç»ˆï¼Œxæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œyæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ‰“å°xæ˜¯æŠ¥é”™ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a, b</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br><span class="line">   <span class="keyword">var</span> a = (b = <span class="number">3</span>);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(b);   </span><br><span class="line">&#125;)()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span> </span><br><span class="line"><span class="literal">undefined</span> </span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="number">3</span> </span><br><span class="line"><span class="literal">undefined</span> </span><br><span class="line"><span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé¢˜ç›®å’Œä¸Šé¢é¢˜ç›®è€ƒå¯Ÿçš„çŸ¥è¯†ç‚¹ç±»ä¼¼ï¼Œbèµ‹å€¼ä¸º3ï¼Œbæ­¤æ—¶æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œå°†3èµ‹å€¼ç»™aï¼Œaæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæ‰€ä»¥æœ€åæ‰“å°çš„æ—¶å€™ï¼Œaä»æ—§æ˜¯undefinedã€‚</p>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ (!)"></a>3. ä»£ç è¾“å‡ºç»“æœ (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> friendName = <span class="string">&#x27;World&#x27;</span>;</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> friendName === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> friendName = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Goodbye &#x27;</span> + friendName);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello &#x27;</span> + friendName);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼šGoodbye Jack</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ JavaScriptä¸­ï¼Œ Function å’Œ var éƒ½ä¼šè¢«æå‡ï¼ˆå˜é‡æå‡ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±ç›¸å½“äºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">&#x27;World!&#x27;</span>;</span><br><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> name;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> name === <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">        name = <span class="string">&#x27;Jack&#x27;</span>;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Goodbye &#x27;</span> + name);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello &#x27;</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ï¼Œç­”æ¡ˆå°±ä¸€ç›®äº†ç„¶äº†ã€‚</p>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fn1</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn1&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="title function_">fn1</span>()</span><br><span class="line"><span class="title function_">fn2</span>()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> fn2 = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fn2&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="title function_">fn2</span>()</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fn1</span><br><span class="line"><span class="title class_">Uncaught</span> <span class="title class_">TypeError</span>: fn2 is not a <span class="keyword">function</span></span><br><span class="line">fn2</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä¹Ÿæ˜¯åœ¨è€ƒå¯Ÿå˜é‡æå‡ï¼Œå…³é”®åœ¨äºç¬¬ä¸€ä¸ªfn2()ï¼Œè¿™æ—¶fn2ä»æ˜¯ä¸€ä¸ªundefinedçš„å˜é‡ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™fn2ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚</p>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#5-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> temp = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(temp); <span class="comment">// 10</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();</span><br><span class="line"><span class="comment">// å‡½æ•°æå‡ä¹‹åï¼Œä¸‹é¢è¿™è¦†ç›–æ‰ä¸Šé¢çš„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> temp = <span class="number">10</span>;</span><br><span class="line">    <span class="title function_">b</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">b</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(temp); <span class="comment">// æŠ¥é”™ Uncaught ReferenceError: temp is not defined</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">a</span>();</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¸¤æ®µä»£ç ä¸­ï¼Œç¬¬ä¸€æ®µæ˜¯å¯ä»¥æ­£å¸¸è¾“å‡ºï¼Œè¿™ä¸ªåº”è¯¥æ²¡å•¥é—®é¢˜ï¼Œå…³é”®åœ¨äºç¬¬äºŒæ®µä»£ç ï¼Œå®ƒä¼šæŠ¥é”™Uncaught ReferenceError: temp is not definedã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ (!)"></a>6. ä»£ç è¾“å‡ºç»“æœ (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="number">3</span>;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">c</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="title function_">alert</span>(a);</span><br><span class="line">&#125;</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line"> <span class="keyword">var</span> a=<span class="number">4</span>;</span><br><span class="line"> <span class="title function_">c</span>(); <span class="comment">//3</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>jsä¸­å˜é‡çš„ä½œç”¨åŸŸé“¾ä¸å®šä¹‰æ—¶çš„ç¯å¢ƒæœ‰å…³ï¼Œä¸æ‰§è¡Œæ—¶æ— å…³ã€‚æ‰§è¡Œç¯å¢ƒåªä¼šæ”¹å˜thisã€ä¼ é€’çš„å‚æ•°ã€å…¨å±€å˜é‡ç­‰</p>
<h3 id="7-ä»£ç è¾“å‡ºé—®é¢˜"><a href="#7-ä»£ç è¾“å‡ºé—®é¢˜" class="headerlink" title="7. ä»£ç è¾“å‡ºé—®é¢˜ (!)"></a>7. ä»£ç è¾“å‡ºé—®é¢˜ (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params">n, o</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(o)</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">fun</span>: <span class="keyword">function</span>(<span class="params">m</span>)&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title function_">fun</span>(m, n);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="title function_">fun</span>(<span class="number">0</span>);  a.<span class="title function_">fun</span>(<span class="number">1</span>);  a.<span class="title function_">fun</span>(<span class="number">2</span>);  a.<span class="title function_">fun</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="title function_">fun</span>(<span class="number">0</span>).<span class="title function_">fun</span>(<span class="number">1</span>).<span class="title function_">fun</span>(<span class="number">2</span>).<span class="title function_">fun</span>(<span class="number">3</span>);</span><br><span class="line"><span class="keyword">var</span> c = <span class="title function_">fun</span>(<span class="number">0</span>).<span class="title function_">fun</span>(<span class="number">1</span>);  c.<span class="title function_">fun</span>(<span class="number">2</span>);  c.<span class="title function_">fun</span>(<span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">undefined</span>  <span class="number">0</span>  <span class="number">0</span>  <span class="number">0</span></span><br><span class="line"><span class="literal">undefined</span>  <span class="number">0</span>  <span class="number">1</span>  <span class="number">2</span></span><br><span class="line"><span class="literal">undefined</span>  <span class="number">0</span>  <span class="number">1</span>  <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ˜¯ä¸€é“å…³äºé—­åŒ…çš„é¢˜ç›®ï¼Œå¯¹äºfunæ–¹æ³•ï¼Œè°ƒç”¨ä¹‹åè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ å…¥çš„å®å‚æ¯”å‡½æ•°å£°æ˜æ—¶æŒ‡å®šçš„å½¢å‚ä¸ªæ•°è¦å°‘ï¼Œå‰©ä¸‹çš„å½¢å‚éƒ½å°†è®¾ç½®ä¸ºundefinedå€¼ã€‚æ‰€ä»¥ <code>console.log(o);</code> ä¼šè¾“å‡ºundefinedã€‚è€Œaå°±æ˜¯æ˜¯fun(0)è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°funä¸­å‚æ•° n çš„å€¼æ˜¯0ï¼Œè€Œè¿”å›çš„é‚£ä¸ªå¯¹è±¡ä¸­ï¼Œéœ€è¦ä¸€ä¸ªå‚æ•°nï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­æ²¡æœ‰nï¼Œå®ƒå°±ç»§ç»­æ²¿ç€ä½œç”¨åŸŸå‘ä¸Šä¸€çº§çš„ä½œç”¨åŸŸä¸­å¯»æ‰¾nï¼Œæœ€ååœ¨å‡½æ•°funä¸­æ‰¾åˆ°äº†nï¼Œnçš„å€¼æ˜¯0ã€‚äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œå…¶ä»–è¿ç®—å°±å¾ˆç®€å•äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
<h3 id="8-ä»£ç è¾“å‡ºç»“æœ-1"><a href="#8-ä»£ç è¾“å‡ºç»“æœ-1" class="headerlink" title="8. ä»£ç è¾“å‡ºç»“æœ (!)"></a>8. ä»£ç è¾“å‡ºç»“æœ (!)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;;   </span><br><span class="line">g = <span class="keyword">function</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="literal">false</span>;&#125;;   </span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;   </span><br><span class="line">   <span class="keyword">if</span> (<span class="title function_">g</span>() &amp;&amp; [] == ![]) &#123;   </span><br><span class="line">      f = <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="literal">false</span>;&#125;;   </span><br><span class="line">      <span class="keyword">function</span> <span class="title function_">g</span>(<span class="params"></span>) &#123;<span class="keyword">return</span> <span class="literal">true</span>;&#125;   <span class="comment">// å˜é‡æå‡</span></span><br><span class="line">   &#125;   </span><br><span class="line">&#125;)();   </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">f</span>());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š false</p>
<p>è¿™é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå˜é‡få’Œgï¼Œæˆ‘ä»¬çŸ¥é“å˜é‡æ˜¯å¯ä»¥é‡æ–°èµ‹å€¼çš„ã€‚åé¢æ˜¯ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œåœ¨ if æ¡ä»¶ä¸­è°ƒç”¨äº†å‡½æ•° g()ï¼Œç”±äºåœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œåˆé‡æ–°å®šä¹‰äº†å‡½æ•°gï¼Œå°±è¦†ç›–äº†å¤–éƒ¨å®šä¹‰çš„å˜é‡gï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯å†…éƒ¨å‡½æ•° g æ–¹æ³•ï¼Œè¿”å›ä¸º trueã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶é€šè¿‡ï¼Œè¿›å…¥ç¬¬äºŒä¸ªæ¡ä»¶ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªæ¡ä»¶æ˜¯[] &#x3D;&#x3D; ![]ï¼Œå…ˆçœ‹ ![] ï¼Œåœ¨ JavaScript ä¸­ï¼Œå½“ç”¨äºå¸ƒå°”è¿ç®—æ—¶ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œï¼Œå¯¹è±¡çš„éç©ºå¼•ç”¨è¢«è§†ä¸º trueï¼Œç©ºå¼•ç”¨ null åˆ™è¢«è§†ä¸º falseã€‚ç”±äºè¿™é‡Œä¸æ˜¯ä¸€ä¸ª null, è€Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å…ƒç´ çš„æ•°ç»„ï¼Œæ‰€ä»¥ [] è¢«è§†ä¸º true, è€Œ ![] çš„ç»“æœå°±æ˜¯ false äº†ã€‚å½“ä¸€ä¸ªå¸ƒå°”å€¼å‚ä¸åˆ°æ¡ä»¶è¿ç®—çš„æ—¶å€™ï¼Œtrue ä¼šè¢«çœ‹ä½œ 1, è€Œ false ä¼šè¢«çœ‹ä½œ 0ã€‚ç°åœ¨æ¡ä»¶å˜æˆäº† [] &#x3D;&#x3D; 0 çš„é—®é¢˜äº†ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‚ä¸æ¡ä»¶æ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æ±‚å€¼ï¼Œæ±‚å€¼çš„ç»“æœæ˜¯æ•°ç»„æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ[] çš„ç»“æœå°±æ˜¯ â€˜â€™ ï¼Œè€Œ â€˜â€™ ä¼šè¢«å½“ä½œ 0 ï¼Œæ‰€ä»¥ï¼Œæ¡ä»¶æˆç«‹ã€‚</strong></p>
<p><strong>[] !&#x3D; []ï¼Œå¼•ç”¨ç±»å‹æ¯”è¾ƒæŒ‡é’ˆ</strong></p>
<p>ä¸¤ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œæ¡ä»¶ä¸­çš„ä»£ç ï¼Œ f åœ¨å®šä¹‰æ˜¯æ²¡æœ‰ä½¿ç”¨varï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šé€šè¿‡é—­åŒ…è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡ f, é‡æ–°èµ‹å€¼ï¼Œç°åœ¨æ‰§è¡Œ f å‡½æ•°è¿”å›å€¼å·²ç»æˆä¸º false äº†ã€‚è€Œ g åˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„ gï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„ g å‡½æ•°ã€‚æ‰€ä»¥æœ€åçš„ç»“æœå°±æ˜¯ falseã€‚</p>
<h2 id="å››ã€åŸå‹-amp-ç»§æ‰¿"><a href="#å››ã€åŸå‹-amp-ç»§æ‰¿" class="headerlink" title="å››ã€åŸå‹&amp;ç»§æ‰¿"></a>å››ã€åŸå‹&amp;ç»§æ‰¿</h2><h3 id="1-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#1-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="1. ä»£ç è¾“å‡ºç»“æœ"></a>1. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p2 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;king&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">__proto__</span>) <span class="comment">//Person.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">__proto__</span>.<span class="property">__proto__</span>) <span class="comment">//Object.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>) <span class="comment">// null</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>)<span class="comment">//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>.<span class="property">__proto__</span>)<span class="comment">//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property">constructor</span>)<span class="comment">//Person</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p2.<span class="property"><span class="keyword">prototype</span></span>)<span class="comment">//undefined p2æ˜¯å®ä¾‹ï¼Œæ²¡æœ‰prototypeå±æ€§</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">constructor</span>)<span class="comment">//Function ä¸€ä¸ªç©ºå‡½æ•°</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>)<span class="comment">//æ‰“å°å‡ºPerson.prototypeè¿™ä¸ªå¯¹è±¡é‡Œæ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>)<span class="comment">//Person</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span>)<span class="comment">// Object.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Person</span>.<span class="property">__proto__</span>) <span class="comment">//Function.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span>)<span class="comment">//Object.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Function</span>.<span class="property">__proto__</span>)<span class="comment">//Function.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property">__proto__</span>)<span class="comment">//Function.prototype</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span>)<span class="comment">//null</span></span><br></pre></td></tr></table></figure>

<p>è¿™é“ä¹‰é¢˜ç›®è€ƒå¯ŸåŸå‹ã€åŸå‹é“¾çš„åŸºç¡€ï¼Œè®°ä½å°±å¯ä»¥äº†ã€‚</p>
<h3 id="2-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#2-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="2. ä»£ç è¾“å‡ºç»“æœ"></a>2. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span> () &#123;</span><br><span class="line"> getName = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="keyword">return</span> <span class="variable language_">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// b   è¿™é‡Œæ³¨æ„ï¼Œå‡½æ•°ä¹Ÿæ˜¯ä¸ªå¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®å±æ€§</span></span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// c</span></span><br><span class="line"><span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// d</span></span><br><span class="line"><span class="keyword">var</span> getName = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// e</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getName</span> () &#123;</span><br><span class="line"> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">5</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">getName</span>();           <span class="comment">// 2</span></span><br><span class="line"><span class="title function_">getName</span>();               <span class="comment">// 4</span></span><br><span class="line"><span class="title class_">Foo</span>().<span class="title function_">getName</span>();         <span class="comment">// 1   Foo()è¿”å›äº†ä¸€ä¸ªthis</span></span><br><span class="line"><span class="title function_">getName</span>();               <span class="comment">// 1 </span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Foo</span>.<span class="title function_">getName</span>();       <span class="comment">// 2</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Foo</span>().<span class="title function_">getName</span>();     <span class="comment">// 3   // å…ˆnewäº†</span></span><br><span class="line"><span class="keyword">new</span> <span class="keyword">new</span> <span class="title class_">Foo</span>().<span class="title function_">getName</span>(); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š2 4 1 1 2 3 3</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li><strong>Foo.getName()ï¼Œ</strong> Fooä¸ºä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå¯¹è±¡éƒ½å¯ä»¥æœ‰å±æ€§ï¼Œb å¤„å®šä¹‰Fooçš„getNameå±æ€§ä¸ºå‡½æ•°ï¼Œè¾“å‡º2ï¼›</li>
<li><strong>getName()ï¼Œ</strong> è¿™é‡Œçœ‹dã€eå¤„ï¼Œdä¸ºå‡½æ•°è¡¨è¾¾å¼ï¼Œeä¸ºå‡½æ•°å£°æ˜ï¼Œä¸¤è€…åŒºåˆ«åœ¨äºå˜é‡æå‡ï¼Œå‡½æ•°å£°æ˜çš„ 5 ä¼šè¢«åè¾¹å‡½æ•°è¡¨è¾¾å¼çš„ 4 è¦†ç›–ï¼›</li>
<li><strong>Foo().getName()</strong> è¿™é‡Œè¦çœ‹aå¤„ï¼Œåœ¨Fooå†…éƒ¨å°†å…¨å±€çš„getNameé‡æ–°èµ‹å€¼ä¸º console.log(1) çš„å‡½æ•°ï¼Œæ‰§è¡ŒFoo()è¿”å› thisï¼Œè¿™ä¸ªthisæŒ‡å‘windowï¼ŒFoo().getName() å³ä¸ºwindow.getName()ï¼Œè¾“å‡º 1ï¼›</li>
<li><strong>getName()ï¼Œ</strong> ä¸Šé¢3ä¸­ï¼Œå…¨å±€çš„getNameå·²ç»è¢«é‡æ–°èµ‹å€¼ï¼Œæ‰€ä»¥è¿™é‡Œä¾ç„¶è¾“å‡º 1ï¼›</li>
<li><strong>new Foo.getName()ï¼Œ</strong> è¿™é‡Œç­‰ä»·äº new (Foo.getName())ï¼Œå…ˆæ‰§è¡Œ Foo.getName()ï¼Œè¾“å‡º 2ï¼Œç„¶ånewä¸€ä¸ªå®ä¾‹ï¼›</li>
<li><strong>new Foo().getName()ï¼Œ</strong> è¿™ é‡Œç­‰ä»·äº (new Foo()).getName(), å…ˆnewä¸€ä¸ªFooçš„å®ä¾‹ï¼Œå†æ‰§è¡Œè¿™ä¸ªå®ä¾‹çš„getNameæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªå®ä¾‹æœ¬èº«æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥å»åŸå‹é“¾__protot__ä¸Šè¾¹æ‰¾ï¼Œå®ä¾‹.<strong>protot</strong> &#x3D;&#x3D;&#x3D; Foo.prototypeï¼Œæ‰€ä»¥è¾“å‡º 3ï¼›</li>
<li><strong>new new Foo().getName()ï¼Œ</strong> è¿™é‡Œç­‰ä»·äºnew (new Foo().getName())ï¼Œå¦‚ä¸Šè¿°6ï¼Œå…ˆè¾“å‡º 3ï¼Œç„¶ånew ä¸€ä¸ª new Foo().getName() çš„å®ä¾‹ã€‚</li>
</ol>
<h3 id="3-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#3-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="3. ä»£ç è¾“å‡ºç»“æœ"></a>3. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> F = <span class="keyword">function</span>(<span class="params"></span>) &#123;&#125;;</span><br><span class="line"><span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="title class_">Function</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">b</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;b&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> f = <span class="keyword">new</span> <span class="title function_">F</span>();</span><br><span class="line">f.<span class="title function_">a</span>();</span><br><span class="line">f.<span class="title function_">b</span>();</span><br><span class="line">F.<span class="title function_">a</span>();</span><br><span class="line">F.<span class="title function_">b</span>()</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a</span><br><span class="line"><span class="title class_">Uncaught</span> <span class="title class_">TypeError</span>: f.<span class="property">b</span> is not a <span class="keyword">function</span></span><br><span class="line">a</span><br><span class="line">b</span><br></pre></td></tr></table></figure>

<p><strong>è§£æï¼š</strong></p>
<ol>
<li>f å¹¶ä¸æ˜¯ Function çš„å®ä¾‹ï¼Œå› ä¸ºå®ƒæœ¬æ¥å°±ä¸æ˜¯æ„é€ å‡½æ•°ï¼Œè°ƒç”¨çš„æ˜¯ Function åŸå‹é“¾ä¸Šçš„ç›¸å…³å±æ€§å’Œæ–¹æ³•ï¼Œåªèƒ½è®¿é—®åˆ° Object åŸå‹é“¾ã€‚æ‰€ä»¥ f.a() è¾“å‡º a ï¼Œè€Œ f.b() å°±æŠ¥é”™äº†ã€‚</li>
<li>F æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œè€Œ F æ˜¯æ„é€ å‡½æ•° Function çš„ä¸€ä¸ªå®ä¾‹ã€‚å› ä¸º F instanceof Object &#x3D;&#x3D;&#x3D; trueï¼ŒF instanceof Function &#x3D;&#x3D;&#x3D; trueï¼Œç”±æ­¤å¯ä»¥å¾—å‡ºç»“è®ºï¼šF æ˜¯ Object å’Œ Function ä¸¤ä¸ªçš„å®ä¾‹ï¼Œå³ F èƒ½è®¿é—®åˆ° aï¼Œ ä¹Ÿèƒ½è®¿é—®åˆ° bã€‚æ‰€ä»¥ F.a() è¾“å‡º a ï¼ŒF.b() è¾“å‡º bã€‚</li>
</ol>
<h3 id="4-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#4-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="4. ä»£ç è¾“å‡ºç»“æœ"></a>4. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Foo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title class_">Foo</span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="property">a</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="number">4</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">a</span>();</span><br><span class="line"><span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="title class_">Foo</span>();</span><br><span class="line">obj.<span class="title function_">a</span>();</span><br><span class="line"><span class="title class_">Foo</span>.<span class="title function_">a</span>();</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š4 2 1</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>Foo.a() è¿™ä¸ªæ˜¯è°ƒç”¨ Foo å‡½æ•°çš„é™æ€æ–¹æ³• aï¼Œè™½ç„¶ Foo ä¸­æœ‰ä¼˜å…ˆçº§æ›´é«˜çš„å±æ€§æ–¹æ³• aï¼Œä½† Foo æ­¤æ—¶æ²¡æœ‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥æ­¤æ—¶è¾“å‡º Foo çš„é™æ€æ–¹æ³• a çš„ç»“æœï¼š4</li>
<li>let obj &#x3D; new Foo(); ä½¿ç”¨äº† new æ–¹æ³•è°ƒç”¨äº†å‡½æ•°ï¼Œè¿”å›äº†å‡½æ•°å®ä¾‹å¯¹è±¡ï¼Œæ­¤æ—¶ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•åˆå§‹åŒ–ï¼ŒåŸå‹é“¾å»ºç«‹ã€‚</li>
<li>obj.a() ; è°ƒç”¨ obj å®ä¾‹ä¸Šçš„æ–¹æ³• aï¼Œè¯¥å®ä¾‹ä¸Šç›®å‰æœ‰ä¸¤ä¸ª a æ–¹æ³•ï¼šä¸€ä¸ªæ˜¯å†…éƒ¨å±æ€§æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯åŸå‹ä¸Šçš„æ–¹æ³•ã€‚å½“è¿™ä¸¤è€…éƒ½å­˜åœ¨æ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾ ownProperty ï¼Œå¦‚æœæ²¡æœ‰æ‰å»åŸå‹é“¾ä¸Šæ‰¾ï¼Œæ‰€ä»¥è°ƒç”¨å®ä¾‹ä¸Šçš„ a è¾“å‡ºï¼š2</li>
<li>Foo.a() ; æ ¹æ®ç¬¬2æ­¥å¯çŸ¥ Foo å‡½æ•°å†…éƒ¨çš„å±æ€§æ–¹æ³•å·²åˆå§‹åŒ–ï¼Œè¦†ç›–äº†åŒåçš„é™æ€æ–¹æ³•ï¼Œæ‰€ä»¥è¾“å‡ºï¼š1</li>
</ol>
<h3 id="5-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#5-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="5. ä»£ç è¾“å‡ºç»“æœ"></a>5. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Dog</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&#x27;puppy&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">bark</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;woof!woof!&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> dog = <span class="keyword">new</span> <span class="title class_">Dog</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Dog</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span> === <span class="title class_">Dog</span> &amp;&amp; dog.<span class="property">constructor</span> === <span class="title class_">Dog</span> &amp;&amp; dog <span class="keyword">instanceof</span> <span class="title class_">Dog</span>)</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼štrue</p>
<p><strong>è§£æï¼š</strong> å› ä¸ºconstructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œæ‰€ä»¥dog.constructorå®é™…ä¸Šå°±æ˜¯æŒ‡å‘Dog.prototype.constructorï¼›constructorå±æ€§æŒ‡å‘æ„é€ å‡½æ•°ã€‚instanceofè€Œå®é™…æ£€æµ‹çš„æ˜¯ç±»å‹æ˜¯å¦åœ¨å®ä¾‹çš„åŸå‹é“¾ä¸Šã€‚</p>
<p>constructoræ˜¯prototypeä¸Šçš„å±æ€§ï¼Œè¿™ä¸€ç‚¹å¾ˆå®¹æ˜“è¢«å¿½ç•¥æ‰ã€‚constructorå’Œinstanceof çš„ä½œç”¨æ˜¯ä¸åŒçš„ï¼Œæ„Ÿæ€§åœ°æ¥è¯´ï¼Œconstructorçš„é™åˆ¶æ¯”è¾ƒä¸¥æ ¼ï¼Œå®ƒåªèƒ½ä¸¥æ ¼å¯¹æ¯”å¯¹è±¡çš„æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯æŒ‡å®šçš„å€¼ï¼›è€Œinstanceofæ¯”è¾ƒæ¾æ•£ï¼Œåªè¦æ£€æµ‹çš„ç±»å‹åœ¨åŸå‹é“¾ä¸Šï¼Œå°±ä¼šè¿”å›trueã€‚</p>
<h3 id="6-ä»£ç è¾“å‡ºç»“æœ-3"><a href="#6-ä»£ç è¾“å‡ºç»“æœ-3" class="headerlink" title="6. ä»£ç è¾“å‡ºç»“æœ"></a>6. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> A = &#123;<span class="attr">n</span>: <span class="number">4399</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> B =  <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">n</span> = <span class="number">9999</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> C =  <span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> n = <span class="number">8888</span>&#125;;</span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span> = A;</span><br><span class="line">C.<span class="property"><span class="keyword">prototype</span></span> = A;</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="title function_">B</span>();</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="title function_">C</span>();</span><br><span class="line">A.<span class="property">n</span>++</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b.<span class="property">n</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c.<span class="property">n</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š9999 4400</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>console.log(b.n)ï¼Œåœ¨æŸ¥æ‰¾b.næ˜¯é¦–å…ˆæŸ¥æ‰¾ b å¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰ n å±æ€§ï¼Œå¦‚æœæ²¡æœ‰ä¼šå»åŸå‹ï¼ˆprototypeï¼‰ä¸ŠæŸ¥æ‰¾ï¼Œå½“æ‰§è¡Œvar b &#x3D; new B()æ—¶ï¼Œå‡½æ•°å†…éƒ¨this.n&#x3D;9999(æ­¤æ—¶thisæŒ‡å‘ b) è¿”å›bå¯¹è±¡ï¼Œbå¯¹è±¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œæ‰€ä»¥è¿”å› 9999ã€‚</li>
<li>console.log(c.n)ï¼ŒåŒç†ï¼Œå½“æ‰§è¡Œvar c &#x3D; new C()æ—¶ï¼Œcå¯¹è±¡æ²¡æœ‰è‡ªèº«çš„nå±æ€§ï¼Œå‘ä¸ŠæŸ¥æ‰¾ï¼Œæ‰¾åˆ°åŸå‹ ï¼ˆprototypeï¼‰ä¸Šçš„ n å±æ€§ï¼Œå› ä¸º A.n++(æ­¤æ—¶å¯¹è±¡Aä¸­çš„nä¸º4400)ï¼Œ æ‰€ä»¥è¿”å›4400ã€‚</li>
</ol>
<h3 id="7-ä»£ç è¾“å‡ºé—®é¢˜-1"><a href="#7-ä»£ç è¾“å‡ºé—®é¢˜-1" class="headerlink" title="7. ä»£ç è¾“å‡ºé—®é¢˜"></a>7. ä»£ç è¾“å‡ºé—®é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">A</span>(<span class="params"></span>)&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">B</span>(<span class="params">a</span>)&#123;</span><br><span class="line">ã€€ã€€<span class="variable language_">this</span>.<span class="property">a</span> = a;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">C</span>(<span class="params">a</span>)&#123;</span><br><span class="line">ã€€ã€€<span class="keyword">if</span>(a)&#123;</span><br><span class="line">			<span class="variable language_">this</span>.<span class="property">a</span> = a;</span><br><span class="line">ã€€ã€€&#125;</span><br><span class="line">&#125;</span><br><span class="line">A.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">B.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">C.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line"> </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">A</span>().<span class="property">a</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">B</span>().<span class="property">a</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title function_">C</span>(<span class="number">2</span>).<span class="property">a</span>);</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š1 undefined 2</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>console.log(new A().a)ï¼Œnew A()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œæœ¬èº«æ²¡æœ‰aå±æ€§ï¼Œæ‰€ä»¥å‘å®ƒçš„åŸå‹å»æ‰¾ï¼Œå‘ç°åŸå‹çš„aå±æ€§çš„å±æ€§å€¼ä¸º1ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸º1ï¼›</li>
<li>console.log(new B().a)ï¼Œew B()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä½†è¯¥å¯¹è±¡æ²¡æœ‰ä¼ å‚ï¼Œæ•…è¯¥è¾“å‡ºå€¼ä¸ºundefined;</li>
<li>console.log(new C(2).a)ï¼Œnew C()ä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å¯¹è±¡ï¼Œè¯¥æ„é€ å‡½æ•°æœ‰å‚æ•°aï¼Œä¸”ä¼ çš„å®å‚ä¸º2ï¼Œæ‰§è¡Œå‡½æ•°å†…éƒ¨ï¼Œå‘ç°ifä¸ºçœŸï¼Œæ‰§è¡Œthis.a &#x3D; 2,æ•…å±æ€§açš„å€¼ä¸º2ã€‚</li>
</ol>
<h3 id="8-ä»£ç è¾“å‡ºé—®é¢˜"><a href="#8-ä»£ç è¾“å‡ºé—®é¢˜" class="headerlink" title="8 ä»£ç è¾“å‡ºé—®é¢˜"></a>8 ä»£ç è¾“å‡ºé—®é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">Parent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">1</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">b</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="variable language_">this</span>.<span class="property">a</span>];</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">c</span> = &#123; <span class="attr">demo</span>: <span class="number">5</span> &#125;;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">show</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">a</span> , <span class="variable language_">this</span>.<span class="property">b</span> , <span class="variable language_">this</span>.<span class="property">c</span>.<span class="property">demo</span> );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Child</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">a</span> = <span class="number">2</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">change</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">b</span>.<span class="title function_">push</span>(<span class="variable language_">this</span>.<span class="property">a</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">a</span> = <span class="variable language_">this</span>.<span class="property">b</span>.<span class="property">length</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">c</span>.<span class="property">demo</span> = <span class="variable language_">this</span>.<span class="property">a</span>++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Child</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br><span class="line"><span class="keyword">var</span> parent = <span class="keyword">new</span> <span class="title class_">Parent</span>();</span><br><span class="line"><span class="keyword">var</span> child1 = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line"><span class="keyword">var</span> child2 = <span class="keyword">new</span> <span class="title class_">Child</span>();</span><br><span class="line">child1.<span class="property">a</span> = <span class="number">11</span>;</span><br><span class="line">child2.<span class="property">a</span> = <span class="number">12</span>;</span><br><span class="line">parent.<span class="title function_">show</span>();</span><br><span class="line">child1.<span class="title function_">show</span>();</span><br><span class="line">child2.<span class="title function_">show</span>();</span><br><span class="line">child1.<span class="title function_">change</span>();</span><br><span class="line">child2.<span class="title function_">change</span>();</span><br><span class="line">parent.<span class="title function_">show</span>();</span><br><span class="line">child1.<span class="title function_">show</span>();</span><br><span class="line">child2.<span class="title function_">show</span>();</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">parent.<span class="title function_">show</span>(); <span class="comment">// 1  [1,2,1] 5</span></span><br><span class="line"></span><br><span class="line">child1.<span class="title function_">show</span>(); <span class="comment">// 11 [1,2,1] 5</span></span><br><span class="line">child2.<span class="title function_">show</span>(); <span class="comment">// 12 [1,2,1] 5</span></span><br><span class="line"></span><br><span class="line">parent.<span class="title function_">show</span>(); <span class="comment">// 1 [1,2,1] 5</span></span><br><span class="line"></span><br><span class="line">child1.<span class="title function_">show</span>(); <span class="comment">// 5 [1,2,1,11,12] 5</span></span><br><span class="line"></span><br><span class="line">child2.<span class="title function_">show</span>(); <span class="comment">// 6 [1,2,1,11,12] 5</span></span><br></pre></td></tr></table></figure>

<p>è¿™é“é¢˜ç›®å€¼å¾—ç¥å¸ï¼Œä»–æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚<strong>thisçš„æŒ‡å‘ã€åŸå‹ã€åŸå‹é“¾ã€ç±»çš„ç»§æ‰¿ã€æ•°æ®ç±»å‹</strong>ç­‰ã€‚</p>
<p><strong>è§£æï¼š</strong></p>
<ol>
<li>parent.show()ï¼Œå¯ä»¥ç›´æ¥è·å¾—æ‰€éœ€çš„å€¼ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼›</li>
<li>child1.show()ï¼Œ<code>Child</code>çš„æ„é€ å‡½æ•°åŸæœ¬æ˜¯æŒ‡å‘<code>Child</code>çš„ï¼Œé¢˜ç›®æ˜¾å¼å°†<code>Child</code>ç±»çš„åŸå‹å¯¹è±¡æŒ‡å‘äº†<code>Parent</code>ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œéœ€è¦æ³¨æ„<code>Child.prototype</code>æŒ‡å‘çš„æ˜¯<code>Parent</code>çš„å®ä¾‹<code>parent</code>ï¼Œè€Œä¸æ˜¯æŒ‡å‘<code>Parent</code>è¿™ä¸ªç±»ã€‚</li>
<li>child2.show()ï¼Œè¿™ä¸ªä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼›</li>
<li>parent.show()ï¼Œ<code>parent</code>æ˜¯ä¸€ä¸ª<code>Parent</code>ç±»çš„å®ä¾‹ï¼Œ<code>Child.prorotype</code>æŒ‡å‘çš„æ˜¯<code>Parent</code>ç±»çš„å¦ä¸€ä¸ªå®ä¾‹ï¼Œä¸¤è€…åœ¨å †å†…å­˜ä¸­äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä¸Šè¿°æ“ä½œä¸å½±å“<code>parent</code>å®ä¾‹ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸å˜ï¼›</li>
<li>child1.show()ï¼Œ<code>child1</code>æ‰§è¡Œäº†<code>change()</code>æ–¹æ³•åï¼Œå‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–å‘¢?</li>
</ol>
<ul>
<li><strong>this.b.push(this.a)ï¼Œ**ç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘<code>Child.prototype</code>ä¸Šçš„**b**æ•°ç»„,this.aä¼šæŒ‡å‘<code>child1</code>çš„</strong>a<strong>å±æ€§,æ‰€ä»¥<code>Child.prototype.b</code>å˜æˆäº†</strong>[1,2,1,11]**;</li>
<li>**this.a &#x3D; this.b.lengthï¼Œ*<em>è¿™æ¡è¯­å¥ä¸­<code>this.a</code>å’Œ<code>this.b</code>çš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸º<code>child1.a</code>å˜ä¸º*<em>4</em></em>;</li>
<li><strong>this.c.demo &#x3D; this.a++ï¼Œ**ç”±äº<code>child1</code>è‡ªèº«å±æ€§å¹¶æ²¡æœ‰**c**è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„<code>this.c</code>ä¼šæŒ‡å‘<code>Child.prototype.c</code>ï¼Œ<code>this.a</code>å€¼ä¸º</strong>4<strong>ï¼Œä¸ºåŸå§‹ç±»å‹ï¼Œæ•…èµ‹å€¼æ“ä½œæ—¶ä¼šç›´æ¥èµ‹å€¼ï¼Œ<code>Child.prototype.c.demo</code>çš„ç»“æœä¸º</strong>4<strong>ï¼Œè€Œ<code>this.a</code>éšåè‡ªå¢ä¸º</strong>5(4 + 1 &#x3D; 5)ã€‚**</li>
</ul>
<ol>
<li><code>child2</code>æ‰§è¡Œäº†<code>change()</code>æ–¹æ³•, è€Œ<code>child2</code>å’Œ<code>child1</code>å‡æ˜¯<code>Child</code>ç±»çš„å®ä¾‹ï¼Œæ‰€ä»¥ä»–ä»¬çš„åŸå‹é“¾æŒ‡å‘åŒä¸€ä¸ªåŸå‹å¯¹è±¡<code>Child.prototype</code>,ä¹Ÿå°±æ˜¯åŒä¸€ä¸ª<code>parent</code>å®ä¾‹ï¼Œæ‰€ä»¥<code>child2.change()</code>ä¸­æ‰€æœ‰å½±å“åˆ°åŸå‹å¯¹è±¡çš„è¯­å¥éƒ½ä¼šå½±å“<code>child1</code>çš„æœ€ç»ˆè¾“å‡ºç»“æœã€‚</li>
</ol>
<ul>
<li><strong>this.b.push(this.a)ï¼Œ**ç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘<code>Child.prototype</code>ä¸Šçš„**b**æ•°ç»„,this.aä¼šæŒ‡å‘<code>child2</code>çš„</strong>a<strong>å±æ€§,æ‰€ä»¥<code>Child.prototype.b</code>å˜æˆäº†</strong>[1,2,1,11,12]**;</li>
<li>**this.a &#x3D; this.b.lengthï¼Œ*<em>è¿™æ¡è¯­å¥ä¸­<code>this.a</code>å’Œ<code>this.b</code>çš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸º<code>child2.a</code>å˜ä¸º*<em>5</em></em>;</li>
<li><strong>this.c.demo &#x3D; this.a++ï¼Œ**ç”±äº<code>child2</code>è‡ªèº«å±æ€§å¹¶æ²¡æœ‰**c**è¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„<code>this.c</code>ä¼šæŒ‡å‘<code>Child.prototype.c</code>ï¼Œæ•…æ‰§è¡Œç»“æœä¸º<code>Child.prototype.c.demo</code>çš„å€¼å˜ä¸º<code>child2.a</code>çš„å€¼</strong>5<strong>ï¼Œè€Œ<code>child2.a</code>æœ€ç»ˆè‡ªå¢ä¸º</strong>6(5 + 1 &#x3D; 6)ã€‚**</li>
</ul>
<h3 id="9-ä»£ç è¾“å‡ºç»“æœ-2"><a href="#9-ä»£ç è¾“å‡ºç»“æœ-2" class="headerlink" title="9. ä»£ç è¾“å‡ºç»“æœ"></a>9. ä»£ç è¾“å‡ºç»“æœ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">SuperType</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">property</span> = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">SuperType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getSuperValue</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">property</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">SubType</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">subproperty</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span> = <span class="keyword">new</span> <span class="title class_">SuperType</span>();</span><br><span class="line"><span class="title class_">SubType</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">getSubValue</span> = <span class="keyword">function</span> (<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">subproperty</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> instance = <span class="keyword">new</span> <span class="title class_">SubType</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(instance.<span class="title function_">getSuperValue</span>());</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºç»“æœï¼štrue</p>
<p>å®é™…ä¸Šï¼Œè¿™æ®µä»£ç å°±æ˜¯åœ¨å®ç°åŸå‹é“¾ç»§æ‰¿ï¼ŒSubTypeç»§æ‰¿äº†SuperTypeï¼Œæœ¬è´¨æ˜¯é‡å†™äº†SubTypeçš„åŸå‹å¯¹è±¡ï¼Œä»£ä¹‹ä»¥ä¸€ä¸ªæ–°ç±»å‹çš„å®ä¾‹ã€‚SubTypeçš„åŸå‹è¢«é‡å†™äº†ï¼Œæ‰€ä»¥instance.constructoræŒ‡å‘çš„æ˜¯SuperTypeã€‚å…·ä½“å¦‚ä¸‹ï¼š<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8823cf14d07040379eb890c09255c35d~tplv-k3u1fbpfcp-watermark.image" alt="image.png" loading="lazy"></p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>OnlyCat</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://yuyang-hou.github.io/2022/09/06/11%20%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E7%AF%87/" title="ä»£ç è¾“å‡ºç»“æœ">http://yuyang-hou.github.io/2022/09/06/11%20%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%BB%93%E6%9E%9C%E7%AF%87/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2022/09/06/32%20%E7%A7%8B%E6%8B%9B%E6%80%9D%E8%80%83/" rel="prev" title="ä¸”å½“ä½œç§‹æ‹›çš„ä¸€ç‚¹æ„Ÿæƒ³å§"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">ä¸”å½“ä½œç§‹æ‹›çš„ä¸€ç‚¹æ„Ÿæƒ³å§</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2022/09/06/13%20%E9%9D%A2%E7%BB%8F%E6%95%B4%E7%90%86/" rel="next" title="é¢ç»æ•´ç†(ä¸»è¦æ˜¯å­—èŠ‚)"><span class="post-nav-text">é¢ç»æ•´ç†(ä¸»è¦æ˜¯å­—èŠ‚)</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2019 â€“ 2022 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> OnlyCat</span></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a></body></html>